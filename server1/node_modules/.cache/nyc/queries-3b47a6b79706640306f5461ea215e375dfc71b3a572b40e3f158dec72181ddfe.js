function cov_cv78ivju9(){var path="C:\\Users\\USER\\Desktop\\andela new\\potofolioUpdate6\\server1\\controllers\\queries.js";var hash="306ff1d8ab0fae4f3d4a0fb479563fe2ec266a3f";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\USER\\Desktop\\andela new\\potofolioUpdate6\\server1\\controllers\\queries.js",statementMap:{"0":{start:{line:3,column:16},end:{line:3,column:44}},"1":{start:{line:4,column:0},end:{line:4,column:27}},"2":{start:{line:7,column:22},end:{line:14,column:1}},"3":{start:{line:8,column:4},end:{line:13,column:6}},"4":{start:{line:9,column:8},end:{line:11,column:9}},"5":{start:{line:10,column:12},end:{line:10,column:42}},"6":{start:{line:12,column:8},end:{line:12,column:30}},"7":{start:{line:17,column:19},end:{line:43,column:1}},"8":{start:{line:19,column:4},end:{line:42,column:6}},"9":{start:{line:22,column:8},end:{line:41,column:9}},"10":{start:{line:24,column:31},end:{line:30,column:14}},"11":{start:{line:33,column:12},end:{line:36,column:14}},"12":{start:{line:34,column:16},end:{line:34,column:54}},"13":{start:{line:34,column:24},end:{line:34,column:54}},"14":{start:{line:35,column:16},end:{line:35,column:38}},"15":{start:{line:39,column:12},end:{line:39,column:86}},"16":{start:{line:39,column:20},end:{line:39,column:86}},"17":{start:{line:40,column:12},end:{line:40,column:62}},"18":{start:{line:47,column:0},end:{line:51,column:3}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:7,column:22},end:{line:7,column:23}},loc:{start:{line:7,column:36},end:{line:14,column:1}},line:7},"1":{name:"(anonymous_1)",decl:{start:{line:8,column:21},end:{line:8,column:22}},loc:{start:{line:8,column:34},end:{line:13,column:5}},line:8},"2":{name:"(anonymous_2)",decl:{start:{line:17,column:19},end:{line:17,column:20}},loc:{start:{line:17,column:33},end:{line:43,column:1}},line:17},"3":{name:"(anonymous_3)",decl:{start:{line:19,column:45},end:{line:19,column:46}},loc:{start:{line:19,column:60},end:{line:42,column:5}},line:19},"4":{name:"(anonymous_4)",decl:{start:{line:33,column:28},end:{line:33,column:29}},loc:{start:{line:33,column:41},end:{line:36,column:13}},line:33}},branchMap:{"0":{loc:{start:{line:9,column:8},end:{line:11,column:9}},type:"if",locations:[{start:{line:9,column:8},end:{line:11,column:9}},{start:{line:9,column:8},end:{line:11,column:9}}],line:9},"1":{loc:{start:{line:22,column:8},end:{line:41,column:9}},type:"if",locations:[{start:{line:22,column:8},end:{line:41,column:9}},{start:{line:22,column:8},end:{line:41,column:9}}],line:22},"2":{loc:{start:{line:34,column:16},end:{line:34,column:54}},type:"if",locations:[{start:{line:34,column:16},end:{line:34,column:54}},{start:{line:34,column:16},end:{line:34,column:54}}],line:34},"3":{loc:{start:{line:39,column:12},end:{line:39,column:86}},type:"if",locations:[{start:{line:39,column:12},end:{line:39,column:86}},{start:{line:39,column:12},end:{line:39,column:86}}],line:39}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"306ff1d8ab0fae4f3d4a0fb479563fe2ec266a3f"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_cv78ivju9=function(){return actualCoverage;};}return actualCoverage;}cov_cv78ivju9();//import tea model
const queries=(cov_cv78ivju9().s[0]++,require('../models/queries'));cov_cv78ivju9().s[1]++;require('dotenv').config();//GET all queries
cov_cv78ivju9().s[2]++;const getAllQueries=(req,res)=>{cov_cv78ivju9().f[0]++;cov_cv78ivju9().s[3]++;queries.find({},(err,data)=>{cov_cv78ivju9().f[1]++;cov_cv78ivju9().s[4]++;if(err){cov_cv78ivju9().b[0][0]++;cov_cv78ivju9().s[5]++;return res.json({Error:err});}else{cov_cv78ivju9().b[0][1]++;}cov_cv78ivju9().s[6]++;return res.json(data);});};// POST queries
cov_cv78ivju9().s[7]++;const newQueries=(req,res)=>{cov_cv78ivju9().f[2]++;cov_cv78ivju9().s[8]++;//check if the query name already exists in db
queries.findOne({name:req.body.name},(err,data)=>{cov_cv78ivju9().f[3]++;cov_cv78ivju9().s[9]++;//if query not in db, add it
if(!data){cov_cv78ivju9().b[1][0]++;//create a new tea object using the Tea model and req.body
const newQueries=(cov_cv78ivju9().s[10]++,new queries({name:req.body.name,email:req.body.email,message:req.body.message}));// save this object to database
cov_cv78ivju9().s[11]++;newQueries.save((err,data)=>{cov_cv78ivju9().f[4]++;cov_cv78ivju9().s[12]++;if(err){cov_cv78ivju9().b[2][0]++;cov_cv78ivju9().s[13]++;return res.json({Error:err});}else{cov_cv78ivju9().b[2][1]++;}cov_cv78ivju9().s[14]++;return res.json(data);});//if there's an error or the tea is in db, return a message         
}else{cov_cv78ivju9().b[1][1]++;cov_cv78ivju9().s[15]++;if(err){cov_cv78ivju9().b[3][0]++;cov_cv78ivju9().s[16]++;return res.json(`Something went wrong, please try again. ${err}`);}else{cov_cv78ivju9().b[3][1]++;}cov_cv78ivju9().s[17]++;return res.json({message:"query already exists"});}});};//export controller functions
cov_cv78ivju9().s[18]++;module.exports={getAllQueries,newQueries};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInF1ZXJpZXMuanMiXSwibmFtZXMiOlsicXVlcmllcyIsInJlcXVpcmUiLCJjb25maWciLCJnZXRBbGxRdWVyaWVzIiwicmVxIiwicmVzIiwiZmluZCIsImVyciIsImRhdGEiLCJqc29uIiwiRXJyb3IiLCJuZXdRdWVyaWVzIiwiZmluZE9uZSIsIm5hbWUiLCJib2R5IiwiZW1haWwiLCJtZXNzYWdlIiwic2F2ZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI4MEdBZVk7eUZBZFo7QUFDQSxLQUFNQSxDQUFBQSxPQUFPLHlCQUFHQyxPQUFPLENBQUMsbUJBQUQsQ0FBVixDQUFiLEMsdUJBQ0FBLE9BQU8sQ0FBQyxRQUFELENBQVAsQ0FBa0JDLE1BQWxCLEdBRUE7dUJBQ0EsS0FBTUMsQ0FBQUEsYUFBYSxDQUFHLENBQUNDLEdBQUQsQ0FBTUMsR0FBTixHQUFjLCtDQUNoQ0wsT0FBTyxDQUFDTSxJQUFSLENBQWEsRUFBYixDQUFpQixDQUFDQyxHQUFELENBQU1DLElBQU4sR0FBYSwrQ0FDMUIsR0FBSUQsR0FBSixDQUFRLGtEQUNKLE1BQU9GLENBQUFBLEdBQUcsQ0FBQ0ksSUFBSixDQUFTLENBQUNDLEtBQUssQ0FBRUgsR0FBUixDQUFULENBQVAsQ0FDSCxDQUZELGdDQUQwQix1QkFJMUIsTUFBT0YsQ0FBQUEsR0FBRyxDQUFDSSxJQUFKLENBQVNELElBQVQsQ0FBUCxDQUNILENBTEQsRUFNSCxDQVBELENBU0E7dUJBQ0EsS0FBTUcsQ0FBQUEsVUFBVSxDQUFHLENBQUNQLEdBQUQsQ0FBTUMsR0FBTixHQUFjLCtDQUM3QjtBQUNBTCxPQUFPLENBQUNZLE9BQVIsQ0FBZ0IsQ0FBRUMsSUFBSSxDQUFFVCxHQUFHLENBQUNVLElBQUosQ0FBU0QsSUFBakIsQ0FBaEIsQ0FBeUMsQ0FBQ04sR0FBRCxDQUFNQyxJQUFOLEdBQWUsK0NBRXBEO0FBQ0EsR0FBSSxDQUFDQSxJQUFMLENBQVcsMkJBQ1A7QUFDQSxLQUFNRyxDQUFBQSxVQUFVLDBCQUFHLEdBQUlYLENBQUFBLE9BQUosQ0FBWSxDQUMzQmEsSUFBSSxDQUFDVCxHQUFHLENBQUNVLElBQUosQ0FBU0QsSUFEYSxDQUUzQkUsS0FBSyxDQUFDWCxHQUFHLENBQUNVLElBQUosQ0FBU0MsS0FGWSxDQUczQkMsT0FBTyxDQUFDWixHQUFHLENBQUNVLElBQUosQ0FBU0UsT0FIVSxDQUFaLENBQUgsQ0FBaEIsQ0FRQTtBQVZPLHdCQVdQTCxVQUFVLENBQUNNLElBQVgsQ0FBZ0IsQ0FBQ1YsR0FBRCxDQUFNQyxJQUFOLEdBQWEsZ0RBQ3pCLEdBQUdELEdBQUgsQ0FBUSx5REFBT0YsQ0FBQUEsR0FBRyxDQUFDSSxJQUFKLENBQVMsQ0FBQ0MsS0FBSyxDQUFFSCxHQUFSLENBQVQsQ0FBUCxDQUE4QixDQUF0QyxnQ0FEeUIsd0JBRXpCLE1BQU9GLENBQUFBLEdBQUcsQ0FBQ0ksSUFBSixDQUFTRCxJQUFULENBQVAsQ0FDSCxDQUhELEVBSUo7QUFDQyxDQWhCRCxJQWdCSyxtREFDRCxHQUFHRCxHQUFILENBQVEseURBQU9GLENBQUFBLEdBQUcsQ0FBQ0ksSUFBSixDQUFVLDJDQUEwQ0YsR0FBSSxFQUF4RCxDQUFQLENBQWtFLENBQTFFLGdDQURDLHdCQUVELE1BQU9GLENBQUFBLEdBQUcsQ0FBQ0ksSUFBSixDQUFTLENBQUNPLE9BQU8sQ0FBQyxzQkFBVCxDQUFULENBQVAsQ0FDSCxDQUNKLENBdkJELEVBd0JILENBMUJELENBNkJBO3dCQUNBRSxNQUFNLENBQUNDLE9BQVAsQ0FBaUIsQ0FDYmhCLGFBRGEsQ0FFYlEsVUFGYSxDQUFqQiIsInNvdXJjZXNDb250ZW50IjpbIlxyXG4vL2ltcG9ydCB0ZWEgbW9kZWxcclxuY29uc3QgcXVlcmllcyA9IHJlcXVpcmUoJy4uL21vZGVscy9xdWVyaWVzJyk7XHJcbnJlcXVpcmUoJ2RvdGVudicpLmNvbmZpZygpO1xyXG5cclxuLy9HRVQgYWxsIHF1ZXJpZXNcclxuY29uc3QgZ2V0QWxsUXVlcmllcyA9IChyZXEsIHJlcykgPT4ge1xyXG4gICAgcXVlcmllcy5maW5kKHt9LCAoZXJyLCBkYXRhKT0+e1xyXG4gICAgICAgIGlmIChlcnIpe1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oe0Vycm9yOiBlcnJ9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKGRhdGEpO1xyXG4gICAgfSlcclxufTtcclxuXHJcbi8vIFBPU1QgcXVlcmllc1xyXG5jb25zdCBuZXdRdWVyaWVzID0gKHJlcSwgcmVzKSA9PiB7XHJcbiAgICAvL2NoZWNrIGlmIHRoZSBxdWVyeSBuYW1lIGFscmVhZHkgZXhpc3RzIGluIGRiXHJcbiAgICBxdWVyaWVzLmZpbmRPbmUoeyBuYW1lOiByZXEuYm9keS5uYW1lIH0sIChlcnIsIGRhdGEpID0+IHtcclxuXHJcbiAgICAgICAgLy9pZiBxdWVyeSBub3QgaW4gZGIsIGFkZCBpdFxyXG4gICAgICAgIGlmICghZGF0YSkge1xyXG4gICAgICAgICAgICAvL2NyZWF0ZSBhIG5ldyB0ZWEgb2JqZWN0IHVzaW5nIHRoZSBUZWEgbW9kZWwgYW5kIHJlcS5ib2R5XHJcbiAgICAgICAgICAgIGNvbnN0IG5ld1F1ZXJpZXMgPSBuZXcgcXVlcmllcyh7XHJcbiAgICAgICAgICAgICAgICBuYW1lOnJlcS5ib2R5Lm5hbWUsXHJcbiAgICAgICAgICAgICAgICBlbWFpbDpyZXEuYm9keS5lbWFpbCxcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6cmVxLmJvZHkubWVzc2FnZSxcclxuICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgIC8vIHNhdmUgdGhpcyBvYmplY3QgdG8gZGF0YWJhc2VcclxuICAgICAgICAgICAgbmV3UXVlcmllcy5zYXZlKChlcnIsIGRhdGEpPT57XHJcbiAgICAgICAgICAgICAgICBpZihlcnIpIHJldHVybiByZXMuanNvbih7RXJyb3I6IGVycn0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKGRhdGEpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIC8vaWYgdGhlcmUncyBhbiBlcnJvciBvciB0aGUgdGVhIGlzIGluIGRiLCByZXR1cm4gYSBtZXNzYWdlICAgICAgICAgXHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIGlmKGVycikgcmV0dXJuIHJlcy5qc29uKGBTb21ldGhpbmcgd2VudCB3cm9uZywgcGxlYXNlIHRyeSBhZ2Fpbi4gJHtlcnJ9YCk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuanNvbih7bWVzc2FnZTpcInF1ZXJ5IGFscmVhZHkgZXhpc3RzXCJ9KTtcclxuICAgICAgICB9XHJcbiAgICB9KSAgICBcclxufTtcclxuXHJcblxyXG4vL2V4cG9ydCBjb250cm9sbGVyIGZ1bmN0aW9uc1xyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuICAgIGdldEFsbFF1ZXJpZXMsIFxyXG4gICAgbmV3UXVlcmllcyxcclxuICAgIFxyXG4gfTsiXX0=