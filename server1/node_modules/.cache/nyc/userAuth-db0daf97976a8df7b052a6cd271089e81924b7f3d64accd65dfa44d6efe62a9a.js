function cov_3ds4tr1w5(){var path="C:\\Users\\USER\\Desktop\\andela new\\potofolioUpdate6\\server1\\middleware\\userAuth.js";var hash="835c340b86d3caba27fd82ebea556eaee6fb7792";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\USER\\Desktop\\andela new\\potofolioUpdate6\\server1\\middleware\\userAuth.js",statementMap:{"0":{start:{line:1,column:12},end:{line:1,column:35}},"1":{start:{line:3,column:15},end:{line:3,column:26}},"2":{start:{line:5,column:20},end:{line:19,column:1}},"3":{start:{line:7,column:4},end:{line:7,column:70}},"4":{start:{line:9,column:2},end:{line:11,column:3}},"5":{start:{line:10,column:4},end:{line:10,column:74}},"6":{start:{line:12,column:2},end:{line:17,column:3}},"7":{start:{line:13,column:20},end:{line:13,column:65}},"8":{start:{line:14,column:4},end:{line:14,column:23}},"9":{start:{line:16,column:4},end:{line:16,column:49}},"10":{start:{line:18,column:2},end:{line:18,column:16}},"11":{start:{line:21,column:0},end:{line:21,column:29}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:5,column:20},end:{line:5,column:21}},loc:{start:{line:5,column:40},end:{line:19,column:1}},line:5}},branchMap:{"0":{loc:{start:{line:7,column:4},end:{line:7,column:70}},type:"binary-expr",locations:[{start:{line:7,column:4},end:{line:7,column:18}},{start:{line:7,column:22},end:{line:7,column:37}},{start:{line:7,column:41},end:{line:7,column:70}}],line:7},"1":{loc:{start:{line:9,column:2},end:{line:11,column:3}},type:"if",locations:[{start:{line:9,column:2},end:{line:11,column:3}},{start:{line:9,column:2},end:{line:11,column:3}}],line:9}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0},f:{"0":0},b:{"0":[0,0,0],"1":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"835c340b86d3caba27fd82ebea556eaee6fb7792"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_3ds4tr1w5=function(){return actualCoverage;};}return actualCoverage;}cov_3ds4tr1w5();const jwt=(cov_3ds4tr1w5().s[0]++,require("jsonwebtoken"));const config=(cov_3ds4tr1w5().s[1]++,process.env);cov_3ds4tr1w5().s[2]++;const verifyToken=(req,res,next)=>{cov_3ds4tr1w5().f[0]++;const token=(cov_3ds4tr1w5().s[3]++,(cov_3ds4tr1w5().b[0][0]++,req.body.token)||(cov_3ds4tr1w5().b[0][1]++,req.query.token)||(cov_3ds4tr1w5().b[0][2]++,req.headers["x-access-token"]));cov_3ds4tr1w5().s[4]++;if(!token){cov_3ds4tr1w5().b[1][0]++;cov_3ds4tr1w5().s[5]++;return res.status(403).send("A token is required for authentication");}else{cov_3ds4tr1w5().b[1][1]++;}cov_3ds4tr1w5().s[6]++;try{const decoded=(cov_3ds4tr1w5().s[7]++,jwt.verify(token,config.ACCESS_TOKEN_SECRET));cov_3ds4tr1w5().s[8]++;req.user=decoded;}catch(err){cov_3ds4tr1w5().s[9]++;return res.status(401).send("Invalid Token");}cov_3ds4tr1w5().s[10]++;return next();};cov_3ds4tr1w5().s[11]++;module.exports=verifyToken;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXJBdXRoLmpzIl0sIm5hbWVzIjpbImp3dCIsInJlcXVpcmUiLCJjb25maWciLCJwcm9jZXNzIiwiZW52IiwidmVyaWZ5VG9rZW4iLCJyZXEiLCJyZXMiLCJuZXh0IiwidG9rZW4iLCJib2R5IiwicXVlcnkiLCJoZWFkZXJzIiwic3RhdHVzIiwic2VuZCIsImRlY29kZWQiLCJ2ZXJpZnkiLCJBQ0NFU1NfVE9LRU5fU0VDUkVUIiwidXNlciIsImVyciIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI2OERBZVk7eUZBZlosS0FBTUEsQ0FBQUEsR0FBRyx5QkFBR0MsT0FBTyxDQUFDLGNBQUQsQ0FBVixDQUFULENBRUEsS0FBTUMsQ0FBQUEsTUFBTSx5QkFBR0MsT0FBTyxDQUFDQyxHQUFYLENBQVosQyx1QkFFQSxLQUFNQyxDQUFBQSxXQUFXLENBQUcsQ0FBQ0MsR0FBRCxDQUFNQyxHQUFOLENBQVdDLElBQVgsR0FBb0Isd0JBQ3RDLEtBQU1DLENBQUFBLEtBQUsseUJBQ1QsMkJBQUFILEdBQUcsQ0FBQ0ksSUFBSixDQUFTRCxLQUFULDhCQUFrQkgsR0FBRyxDQUFDSyxLQUFKLENBQVVGLEtBQTVCLDhCQUFxQ0gsR0FBRyxDQUFDTSxPQUFKLENBQVksZ0JBQVosQ0FBckMsQ0FEUyxDQUFYLENBRHNDLHVCQUl0QyxHQUFJLENBQUNILEtBQUwsQ0FBWSxrREFDVixNQUFPRixDQUFBQSxHQUFHLENBQUNNLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQix3Q0FBckIsQ0FBUCxDQUNELENBRkQsZ0NBSnNDLHVCQU90QyxHQUFJLENBQ0YsS0FBTUMsQ0FBQUEsT0FBTyx5QkFBR2YsR0FBRyxDQUFDZ0IsTUFBSixDQUFXUCxLQUFYLENBQWtCUCxNQUFNLENBQUNlLG1CQUF6QixDQUFILENBQWIsQ0FERSx1QkFFRlgsR0FBRyxDQUFDWSxJQUFKLENBQVdILE9BQVgsQ0FDRCxDQUFDLE1BQU9JLEdBQVAsQ0FBWSx3QkFDWixNQUFPWixDQUFBQSxHQUFHLENBQUNNLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQixlQUFyQixDQUFQLENBQ0QsQ0FacUMsd0JBYXRDLE1BQU9OLENBQUFBLElBQUksRUFBWCxDQUNELENBZEQsQyx3QkFnQkFZLE1BQU0sQ0FBQ0MsT0FBUCxDQUFpQmhCLFdBQWpCIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qgand0ID0gcmVxdWlyZShcImpzb253ZWJ0b2tlblwiKTtcclxuXHJcbmNvbnN0IGNvbmZpZyA9IHByb2Nlc3MuZW52O1xyXG5cclxuY29uc3QgdmVyaWZ5VG9rZW4gPSAocmVxLCByZXMsIG5leHQpID0+IHtcclxuICBjb25zdCB0b2tlbiA9XHJcbiAgICByZXEuYm9keS50b2tlbiB8fCByZXEucXVlcnkudG9rZW4gfHwgcmVxLmhlYWRlcnNbXCJ4LWFjY2Vzcy10b2tlblwiXTtcclxuXHJcbiAgaWYgKCF0b2tlbikge1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5zZW5kKFwiQSB0b2tlbiBpcyByZXF1aXJlZCBmb3IgYXV0aGVudGljYXRpb25cIik7XHJcbiAgfVxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBkZWNvZGVkID0gand0LnZlcmlmeSh0b2tlbiwgY29uZmlnLkFDQ0VTU19UT0tFTl9TRUNSRVQpO1xyXG4gICAgcmVxLnVzZXIgPSBkZWNvZGVkO1xyXG4gIH0gY2F0Y2ggKGVycikge1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5zZW5kKFwiSW52YWxpZCBUb2tlblwiKTtcclxuICB9XHJcbiAgcmV0dXJuIG5leHQoKTtcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gdmVyaWZ5VG9rZW47Il19