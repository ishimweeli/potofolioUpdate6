function cov_tz2oofnm9(){var path="C:\\Users\\USER\\Desktop\\andela new\\potofolioUpdate6\\server1\\app.js";var hash="debd47336c2d5704ce3b7dd6a7a0bfb611a1264e";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\USER\\Desktop\\andela new\\potofolioUpdate6\\server1\\app.js",statementMap:{"0":{start:{line:1,column:16},end:{line:1,column:35}},"1":{start:{line:2,column:15},end:{line:2,column:42}},"2":{start:{line:3,column:16},end:{line:3,column:43}},"3":{start:{line:4,column:10},end:{line:4,column:33}},"4":{start:{line:5,column:12},end:{line:5,column:21}},"5":{start:{line:6,column:13},end:{line:6,column:37}},"6":{start:{line:7,column:13},end:{line:7,column:32}},"7":{start:{line:8,column:14},end:{line:8,column:46}},"8":{start:{line:9,column:16},end:{line:9,column:44}},"9":{start:{line:12,column:0},end:{line:12,column:27}},"10":{start:{line:14,column:0},end:{line:14,column:24}},"11":{start:{line:15,column:0},end:{line:15,column:21}},"12":{start:{line:16,column:0},end:{line:16,column:22}},"13":{start:{line:19,column:0},end:{line:69,column:5}},"14":{start:{line:22,column:4},end:{line:67,column:5}},"15":{start:{line:24,column:57},end:{line:24,column:65}},"16":{start:{line:27,column:6},end:{line:29,column:7}},"17":{start:{line:28,column:8},end:{line:28,column:54}},"18":{start:{line:33,column:22},end:{line:33,column:51}},"19":{start:{line:35,column:6},end:{line:37,column:7}},"20":{start:{line:36,column:8},end:{line:36,column:72}},"21":{start:{line:40,column:19},end:{line:40,column:47}},"22":{start:{line:42,column:6},end:{line:42,column:58}},"23":{start:{line:45,column:19},end:{line:50,column:8}},"24":{start:{line:53,column:20},end:{line:59,column:7}},"25":{start:{line:61,column:6},end:{line:61,column:25}},"26":{start:{line:64,column:6},end:{line:64,column:33}},"27":{start:{line:66,column:6},end:{line:66,column:23}},"28":{start:{line:77,column:0},end:{line:112,column:5}},"29":{start:{line:80,column:4},end:{line:110,column:5}},"30":{start:{line:82,column:34},end:{line:82,column:42}},"31":{start:{line:85,column:6},end:{line:87,column:7}},"32":{start:{line:86,column:8},end:{line:86,column:54}},"33":{start:{line:89,column:19},end:{line:89,column:48}},"34":{start:{line:91,column:6},end:{line:106,column:7}},"35":{start:{line:93,column:22},end:{line:99,column:9}},"36":{start:{line:102,column:8},end:{line:102,column:27}},"37":{start:{line:105,column:8},end:{line:105,column:35}},"38":{start:{line:107,column:6},end:{line:107,column:50}},"39":{start:{line:109,column:6},end:{line:109,column:23}},"40":{start:{line:118,column:2},end:{line:120,column:5}},"41":{start:{line:119,column:4},end:{line:119,column:40}},"42":{start:{line:122,column:2},end:{line:132,column:5}},"43":{start:{line:123,column:4},end:{line:123,column:25}},"44":{start:{line:124,column:20},end:{line:124,column:35}},"45":{start:{line:125,column:15},end:{line:129,column:5}},"46":{start:{line:130,column:5},end:{line:130,column:35}},"47":{start:{line:139,column:18},end:{line:139,column:37}},"48":{start:{line:142,column:1},end:{line:149,column:3}},"49":{start:{line:146,column:9},end:{line:146,column:53}},"50":{start:{line:146,column:18},end:{line:146,column:53}},"51":{start:{line:147,column:9},end:{line:147,column:94}},"52":{start:{line:153,column:17},end:{line:155,column:2}},"53":{start:{line:154,column:4},end:{line:154,column:75}},"54":{start:{line:156,column:0},end:{line:156,column:26}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:19,column:22},end:{line:19,column:23}},loc:{start:{line:19,column:42},end:{line:69,column:3}},line:19},"1":{name:"(anonymous_1)",decl:{start:{line:77,column:19},end:{line:77,column:20}},loc:{start:{line:77,column:39},end:{line:112,column:3}},line:77},"2":{name:"(anonymous_2)",decl:{start:{line:118,column:30},end:{line:118,column:31}},loc:{start:{line:118,column:44},end:{line:120,column:3}},line:118},"3":{name:"(anonymous_3)",decl:{start:{line:122,column:33},end:{line:122,column:34}},loc:{start:{line:122,column:52},end:{line:132,column:3}},line:122},"4":{name:"(anonymous_4)",decl:{start:{line:145,column:5},end:{line:145,column:6}},loc:{start:{line:145,column:14},end:{line:148,column:6}},line:145},"5":{name:"(anonymous_5)",decl:{start:{line:153,column:54},end:{line:153,column:55}},loc:{start:{line:153,column:60},end:{line:155,column:1}},line:153}},branchMap:{"0":{loc:{start:{line:27,column:6},end:{line:29,column:7}},type:"if",locations:[{start:{line:27,column:6},end:{line:29,column:7}},{start:{line:27,column:6},end:{line:29,column:7}}],line:27},"1":{loc:{start:{line:27,column:12},end:{line:27,column:56}},type:"binary-expr",locations:[{start:{line:27,column:12},end:{line:27,column:17}},{start:{line:27,column:21},end:{line:27,column:29}},{start:{line:27,column:33},end:{line:27,column:43}},{start:{line:27,column:47},end:{line:27,column:56}}],line:27},"2":{loc:{start:{line:35,column:6},end:{line:37,column:7}},type:"if",locations:[{start:{line:35,column:6},end:{line:37,column:7}},{start:{line:35,column:6},end:{line:37,column:7}}],line:35},"3":{loc:{start:{line:85,column:6},end:{line:87,column:7}},type:"if",locations:[{start:{line:85,column:6},end:{line:87,column:7}},{start:{line:85,column:6},end:{line:87,column:7}}],line:85},"4":{loc:{start:{line:85,column:12},end:{line:85,column:29}},type:"binary-expr",locations:[{start:{line:85,column:12},end:{line:85,column:17}},{start:{line:85,column:21},end:{line:85,column:29}}],line:85},"5":{loc:{start:{line:91,column:6},end:{line:106,column:7}},type:"if",locations:[{start:{line:91,column:6},end:{line:106,column:7}},{start:{line:91,column:6},end:{line:106,column:7}}],line:91},"6":{loc:{start:{line:91,column:10},end:{line:91,column:65}},type:"binary-expr",locations:[{start:{line:91,column:10},end:{line:91,column:14}},{start:{line:91,column:19},end:{line:91,column:64}}],line:91},"7":{loc:{start:{line:146,column:9},end:{line:146,column:53}},type:"if",locations:[{start:{line:146,column:9},end:{line:146,column:53}},{start:{line:146,column:9},end:{line:146,column:53}}],line:146},"8":{loc:{start:{line:153,column:28},end:{line:153,column:52}},type:"binary-expr",locations:[{start:{line:153,column:28},end:{line:153,column:44}},{start:{line:153,column:48},end:{line:153,column:52}}],line:153}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0},b:{"0":[0,0],"1":[0,0,0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"debd47336c2d5704ce3b7dd6a7a0bfb611a1264e"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_tz2oofnm9=function(){return actualCoverage;};}return actualCoverage;}cov_tz2oofnm9();const express=(cov_tz2oofnm9().s[0]++,require('express'));const routes=(cov_tz2oofnm9().s[1]++,require('./routes/queries'));const routes1=(cov_tz2oofnm9().s[2]++,require('./routes/article'));const jwt=(cov_tz2oofnm9().s[3]++,require('jsonwebtoken'));const app=(cov_tz2oofnm9().s[4]++,express());const User=(cov_tz2oofnm9().s[5]++,require("./models/user"));var bcrypt=(cov_tz2oofnm9().s[6]++,require('bcryptjs'));const auth1=(cov_tz2oofnm9().s[7]++,require("./middleware/userAuth"));const article=(cov_tz2oofnm9().s[8]++,require('./models/articles'));// import the routes
cov_tz2oofnm9().s[9]++;require('dotenv').config();cov_tz2oofnm9().s[10]++;app.use(express.json());cov_tz2oofnm9().s[11]++;app.use('/',routes);cov_tz2oofnm9().s[12]++;app.use('/',routes1);cov_tz2oofnm9().s[13]++;app.post("/register",async(req,res)=>{cov_tz2oofnm9().f[0]++;cov_tz2oofnm9().s[14]++;// Our register logic starts here
try{// Get user input
const{first_name,last_name,email,password}=(cov_tz2oofnm9().s[15]++,req.body);// Validate user input
cov_tz2oofnm9().s[16]++;if(!((cov_tz2oofnm9().b[1][0]++,email)&&(cov_tz2oofnm9().b[1][1]++,password)&&(cov_tz2oofnm9().b[1][2]++,first_name)&&(cov_tz2oofnm9().b[1][3]++,last_name))){cov_tz2oofnm9().b[0][0]++;cov_tz2oofnm9().s[17]++;res.status(400).send("All input is required");}else{cov_tz2oofnm9().b[0][1]++;}// check if user already exist
// Validate if user exist in our database
const oldUser=(cov_tz2oofnm9().s[18]++,await User.findOne({email}));cov_tz2oofnm9().s[19]++;if(oldUser){cov_tz2oofnm9().b[2][0]++;cov_tz2oofnm9().s[20]++;return res.status(409).send("User Already Exist. Please Login");}else{cov_tz2oofnm9().b[2][1]++;}//Encrypt user password
const salt=(cov_tz2oofnm9().s[21]++,await bcrypt.genSaltSync(10));//    const password = await req.body.password;
cov_tz2oofnm9().s[22]++;encryptedPassword=await bcrypt.hash(password,10);// Create user in our database
const user=(cov_tz2oofnm9().s[23]++,await User.create({first_name,last_name,email:email.toLowerCase(),// sanitize: convert email to lowercase
password:encryptedPassword}));// Create token
const token=(cov_tz2oofnm9().s[24]++,jwt.sign({user_id:user._id,email},process.env.ACCESS_TOKEN_SECRET,{expiresIn:"2h"}));// save user token
cov_tz2oofnm9().s[25]++;user.token=token;// return new user
cov_tz2oofnm9().s[26]++;res.status(201).json(user);}catch(err){cov_tz2oofnm9().s[27]++;console.log(err);}// Our register logic ends here
});// ...
// ...
cov_tz2oofnm9().s[28]++;app.post("/login",async(req,res)=>{cov_tz2oofnm9().f[1]++;cov_tz2oofnm9().s[29]++;// Our login logic starts here
try{// Get user input
const{email,password}=(cov_tz2oofnm9().s[30]++,req.body);// Validate user input
cov_tz2oofnm9().s[31]++;if(!((cov_tz2oofnm9().b[4][0]++,email)&&(cov_tz2oofnm9().b[4][1]++,password))){cov_tz2oofnm9().b[3][0]++;cov_tz2oofnm9().s[32]++;res.status(400).send("All input is required");}else{cov_tz2oofnm9().b[3][1]++;}// Validate if user exist in our database
const user=(cov_tz2oofnm9().s[33]++,await User.findOne({email}));cov_tz2oofnm9().s[34]++;if((cov_tz2oofnm9().b[6][0]++,user)&&(cov_tz2oofnm9().b[6][1]++,await bcrypt.compare(password,user.password))){cov_tz2oofnm9().b[5][0]++;// Create token
const token=(cov_tz2oofnm9().s[35]++,jwt.sign({user_id:user._id,email},process.env.ACCESS_TOKEN_SECRET,{expiresIn:"2h"}));// save user token
cov_tz2oofnm9().s[36]++;user.token=token;// user
cov_tz2oofnm9().s[37]++;res.status(200).json(user);}else{cov_tz2oofnm9().b[5][1]++;}cov_tz2oofnm9().s[38]++;res.status(400).send("Invalid Credentials");}catch(err){cov_tz2oofnm9().s[39]++;console.log(err);}// Our register logic ends here
});// ...
cov_tz2oofnm9().s[40]++;app.post("/welcome",auth1,(req,res)=>{cov_tz2oofnm9().f[2]++;cov_tz2oofnm9().s[41]++;res.status(200).send("Welcome 🙌 ");});cov_tz2oofnm9().s[42]++;app.put("/welcome/:id",auth1,async(req,res)=>{cov_tz2oofnm9().f[3]++;cov_tz2oofnm9().s[43]++;console.log(req.body);const articles=(cov_tz2oofnm9().s[44]++,await article());let result=(cov_tz2oofnm9().s[45]++,articles.updateOne({_id:req.body._id},{$set:req.body}));cov_tz2oofnm9().s[46]++;res.send({status:"updated "});});//to use the routes
//import mongoose
const mongoose=(cov_tz2oofnm9().s[47]++,require('mongoose'));//establish connection to database
cov_tz2oofnm9().s[48]++;mongoose.connect(process.env.MONGODB_URI,{useUnifiedTopology:true,useNewUrlParser:true},err=>{cov_tz2oofnm9().f[4]++;cov_tz2oofnm9().s[49]++;if(err){cov_tz2oofnm9().b[7][0]++;cov_tz2oofnm9().s[50]++;return console.log("Error: ",err);}else{cov_tz2oofnm9().b[7][1]++;}cov_tz2oofnm9().s[51]++;console.log("MongoDB Connection -- Ready state is:",mongoose.connection.readyState);});const listener=(cov_tz2oofnm9().s[52]++,app.listen((cov_tz2oofnm9().b[8][0]++,process.env.PORT)||(cov_tz2oofnm9().b[8][1]++,5000),()=>{cov_tz2oofnm9().f[5]++;cov_tz2oofnm9().s[53]++;console.log('Your app is listening on port '+listener.address().port);}));cov_tz2oofnm9().s[54]++;module.exports=listener;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsInJvdXRlcyIsInJvdXRlczEiLCJqd3QiLCJhcHAiLCJVc2VyIiwiYmNyeXB0IiwiYXV0aDEiLCJhcnRpY2xlIiwiY29uZmlnIiwidXNlIiwianNvbiIsInBvc3QiLCJyZXEiLCJyZXMiLCJmaXJzdF9uYW1lIiwibGFzdF9uYW1lIiwiZW1haWwiLCJwYXNzd29yZCIsImJvZHkiLCJzdGF0dXMiLCJzZW5kIiwib2xkVXNlciIsImZpbmRPbmUiLCJzYWx0IiwiZ2VuU2FsdFN5bmMiLCJlbmNyeXB0ZWRQYXNzd29yZCIsImhhc2giLCJ1c2VyIiwiY3JlYXRlIiwidG9Mb3dlckNhc2UiLCJ0b2tlbiIsInNpZ24iLCJ1c2VyX2lkIiwiX2lkIiwicHJvY2VzcyIsImVudiIsIkFDQ0VTU19UT0tFTl9TRUNSRVQiLCJleHBpcmVzSW4iLCJlcnIiLCJjb25zb2xlIiwibG9nIiwiY29tcGFyZSIsInB1dCIsImFydGljbGVzIiwicmVzdWx0IiwidXBkYXRlT25lIiwiJHNldCIsIm1vbmdvb3NlIiwiY29ubmVjdCIsIk1PTkdPREJfVVJJIiwidXNlVW5pZmllZFRvcG9sb2d5IiwidXNlTmV3VXJsUGFyc2VyIiwiY29ubmVjdGlvbiIsInJlYWR5U3RhdGUiLCJsaXN0ZW5lciIsImxpc3RlbiIsIlBPUlQiLCJhZGRyZXNzIiwicG9ydCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJzM05BZVk7eUZBZlosS0FBTUEsQ0FBQUEsT0FBTyx5QkFBR0MsT0FBTyxDQUFFLFNBQUYsQ0FBVixDQUFiLENBQ0EsS0FBTUMsQ0FBQUEsTUFBTSx5QkFBR0QsT0FBTyxDQUFDLGtCQUFELENBQVYsQ0FBWixDQUNBLEtBQU1FLENBQUFBLE9BQU8seUJBQUdGLE9BQU8sQ0FBQyxrQkFBRCxDQUFWLENBQWIsQ0FDQSxLQUFNRyxDQUFBQSxHQUFHLHlCQUFDSCxPQUFPLENBQUMsY0FBRCxDQUFSLENBQVQsQ0FDQSxL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QU8sQ0FBQ0MsR0FBUixDQUFZLHVDQUFaLENBQXFETyxRQUFRLENBQUNLLFVBQVQsQ0FBb0JDLFVBQXpFLEVBQ0gsQ0FOTCxFQVdELEtBQU1DLENBQUFBLFFBQVEsMEJBQUduRCxHQUFHLENBQUNvRCxNQUFKLENBQVcsMkJBQUFyQixPQUFPLENBQUNDLEdBQVIsQ0FBWXFCLElBQVosOEJBQW9CLElBQXBCLENBQVgsQ0FBcUMsSUFBTSxnREFDeERqQixPQUFPLENBQUNDLEdBQVIsQ0FBWSxpQ0FBbUNjLFFBQVEsQ0FBQ0csT0FBVCxHQUFtQkMsSUFBbEUsRUFDSCxDQUZnQixDQUFILENBQWQsQyx3QkFHQUMsTUFBTSxDQUFDQyxPQUFQLENBQWlCTixRQUFqQiIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGV4cHJlc3MgPSByZXF1aXJlICgnZXhwcmVzcycpO1xyXG5jb25zdCByb3V0ZXMgPSByZXF1aXJlKCcuL3JvdXRlcy9xdWVyaWVzJyk7IFxyXG5jb25zdCByb3V0ZXMxID0gcmVxdWlyZSgnLi9yb3V0ZXMvYXJ0aWNsZScpOyBcclxuY29uc3Qgand0PXJlcXVpcmUoJ2pzb253ZWJ0b2tlbicpO1xyXG5jb25zdCBhcHAgPSBleHByZXNzKCk7XHJcbmNvbnN0IFVzZXIgPSByZXF1aXJlKFwiLi9tb2RlbHMvdXNlclwiKTtcclxudmFyIGJjcnlwdCA9IHJlcXVpcmUoJ2JjcnlwdGpzJyk7XHJcbmNvbnN0IGF1dGgxID0gcmVxdWlyZShcIi4vbWlkZGxld2FyZS91c2VyQXV0aFwiKTtcclxuY29uc3QgYXJ0aWNsZSA9IHJlcXVpcmUoJy4vbW9kZWxzL2FydGljbGVzJyk7XHJcbi8vIGltcG9ydCB0aGUgcm91dGVzXHJcblxyXG5yZXF1aXJlKCdkb3RlbnYnKS5jb25maWcoKTtcclxuXHJcbmFwcC51c2UoZXhwcmVzcy5qc29uKCkpO1xyXG5hcHAudXNlKCcvJywgcm91dGVzKTtcclxuYXBwLnVzZSgnLycsIHJvdXRlczEpO1xyXG5cclxuXHJcbmFwcC5wb3N0KFwiL3JlZ2lzdGVyXCIsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG5cclxuICAgIC8vIE91ciByZWdpc3RlciBsb2dpYyBzdGFydHMgaGVyZVxyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gR2V0IHVzZXIgaW5wdXRcclxuICAgICAgY29uc3QgeyBmaXJzdF9uYW1lLCBsYXN0X25hbWUsIGVtYWlsLCBwYXNzd29yZCB9ID0gcmVxLmJvZHk7XHJcbiAgXHJcbiAgICAgIC8vIFZhbGlkYXRlIHVzZXIgaW5wdXRcclxuICAgICAgaWYgKCEoZW1haWwgJiYgcGFzc3dvcmQgJiYgZmlyc3RfbmFtZSAmJiBsYXN0X25hbWUpKSB7XHJcbiAgICAgICAgcmVzLnN0YXR1cyg0MDApLnNlbmQoXCJBbGwgaW5wdXQgaXMgcmVxdWlyZWRcIik7XHJcbiAgICAgIH1cclxuICBcclxuICAgICAgLy8gY2hlY2sgaWYgdXNlciBhbHJlYWR5IGV4aXN0XHJcbiAgICAgIC8vIFZhbGlkYXRlIGlmIHVzZXIgZXhpc3QgaW4gb3VyIGRhdGFiYXNlXHJcbiAgICAgIGNvbnN0IG9sZFVzZXIgPSBhd2FpdCBVc2VyLmZpbmRPbmUoeyBlbWFpbCB9KTtcclxuICBcclxuICAgICAgaWYgKG9sZFVzZXIpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDkpLnNlbmQoXCJVc2VyIEFscmVhZHkgRXhpc3QuIFBsZWFzZSBMb2dpblwiKTtcclxuICAgICAgfVxyXG4gIFxyXG4gICAgICAvL0VuY3J5cHQgdXNlciBwYXNzd29yZFxyXG4gICAgICBjb25zdCBzYWx0ID0gYXdhaXQgYmNyeXB0LmdlblNhbHRTeW5jKDEwKTtcclxuICAgIC8vICAgIGNvbnN0IHBhc3N3b3JkID0gYXdhaXQgcmVxLmJvZHkucGFzc3dvcmQ7XHJcbiAgICAgIGVuY3J5cHRlZFBhc3N3b3JkID0gYXdhaXQgYmNyeXB0Lmhhc2gocGFzc3dvcmQsIDEwKTtcclxuICBcclxuICAgICAgLy8gQ3JlYXRlIHVzZXIgaW4gb3VyIGRhdGFiYXNlXHJcbiAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmNyZWF0ZSh7XHJcbiAgICAgICAgZmlyc3RfbmFtZSxcclxuICAgICAgICBsYXN0X25hbWUsXHJcbiAgICAgICAgZW1haWw6IGVtYWlsLnRvTG93ZXJDYXNlKCksIC8vIHNhbml0aXplOiBjb252ZXJ0IGVtYWlsIHRvIGxvd2VyY2FzZVxyXG4gICAgICAgIHBhc3N3b3JkOiBlbmNyeXB0ZWRQYXNzd29yZCxcclxuICAgICAgfSk7XHJcbiAgXHJcbiAgICAgIC8vIENyZWF0ZSB0b2tlblxyXG4gICAgICBjb25zdCB0b2tlbiA9IGp3dC5zaWduKFxyXG4gICAgICAgIHsgdXNlcl9pZDogdXNlci5faWQsIGVtYWlsIH0sXHJcbiAgICAgICAgcHJvY2Vzcy5lbnYuQUNDRVNTX1RPS0VOX1NFQ1JFVCxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBleHBpcmVzSW46IFwiMmhcIixcclxuICAgICAgICB9XHJcbiAgICAgICk7XHJcbiAgICAgIC8vIHNhdmUgdXNlciB0b2tlblxyXG4gICAgICB1c2VyLnRva2VuID0gdG9rZW47XHJcbiAgXHJcbiAgICAgIC8vIHJldHVybiBuZXcgdXNlclxyXG4gICAgICByZXMuc3RhdHVzKDIwMSkuanNvbih1c2VyKTtcclxuICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgfVxyXG4gICAgLy8gT3VyIHJlZ2lzdGVyIGxvZ2ljIGVuZHMgaGVyZVxyXG4gIH0pO1xyXG4gIFxyXG4gIC8vIC4uLlxyXG5cclxuXHJcblxyXG4gIC8vIC4uLlxyXG5cclxuYXBwLnBvc3QoXCIvbG9naW5cIiwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcblxyXG4gICAgLy8gT3VyIGxvZ2luIGxvZ2ljIHN0YXJ0cyBoZXJlXHJcbiAgICB0cnkge1xyXG4gICAgICAvLyBHZXQgdXNlciBpbnB1dFxyXG4gICAgICBjb25zdCB7IGVtYWlsLCBwYXNzd29yZCB9ID0gcmVxLmJvZHk7XHJcbiAgXHJcbiAgICAgIC8vIFZhbGlkYXRlIHVzZXIgaW5wdXRcclxuICAgICAgaWYgKCEoZW1haWwgJiYgcGFzc3dvcmQpKSB7XHJcbiAgICAgICAgcmVzLnN0YXR1cyg0MDApLnNlbmQoXCJBbGwgaW5wdXQgaXMgcmVxdWlyZWRcIik7XHJcbiAgICAgIH1cclxuICAgICAgLy8gVmFsaWRhdGUgaWYgdXNlciBleGlzdCBpbiBvdXIgZGF0YWJhc2VcclxuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IGVtYWlsIH0pO1xyXG4gIFxyXG4gICAgICBpZiAodXNlciAmJiAoYXdhaXQgYmNyeXB0LmNvbXBhcmUocGFzc3dvcmQsIHVzZXIucGFzc3dvcmQpKSkge1xyXG4gICAgICAgIC8vIENyZWF0ZSB0b2tlblxyXG4gICAgICAgIGNvbnN0IHRva2VuID0gand0LnNpZ24oXHJcbiAgICAgICAgICB7IHVzZXJfaWQ6IHVzZXIuX2lkLCBlbWFpbCB9LFxyXG4gICAgICAgICAgcHJvY2Vzcy5lbnYuQUNDRVNTX1RPS0VOX1NFQ1JFVCxcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgZXhwaXJlc0luOiBcIjJoXCIsXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICBcclxuICAgICAgICAvLyBzYXZlIHVzZXIgdG9rZW5cclxuICAgICAgICB1c2VyLnRva2VuID0gdG9rZW47XHJcbiAgXHJcbiAgICAgICAgLy8gdXNlclxyXG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHVzZXIpO1xyXG4gICAgICB9XHJcbiAgICAgIHJlcy5zdGF0dXMoNDAwKS5zZW5kKFwiSW52YWxpZCBDcmVkZW50aWFsc1wiKTtcclxuICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgfVxyXG4gICAgLy8gT3VyIHJlZ2lzdGVyIGxvZ2ljIGVuZHMgaGVyZVxyXG4gIH0pO1xyXG4gIFxyXG4gIC8vIC4uLlxyXG5cclxuICBcclxuXHJcbiAgYXBwLnBvc3QoXCIvd2VsY29tZVwiLCBhdXRoMSwgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICByZXMuc3RhdHVzKDIwMCkuc2VuZChcIldlbGNvbWUg8J+ZjCBcIik7XHJcbiAgfSk7XHJcblxyXG4gIGFwcC5wdXQoXCIvd2VsY29tZS86aWRcIiwgYXV0aDEsIGFzeW5jKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZyhyZXEuYm9keSlcclxuICAgIGNvbnN0IGFydGljbGVzPSBhd2FpdCBhcnRpY2xlKClcclxuICAgIGxldCByZXN1bHQ9YXJ0aWNsZXMudXBkYXRlT25lKFxyXG4gICAgIHsgX2lkOnJlcS5ib2R5Ll9pZH0sXHJcblxyXG4gICAgeyRzZXQ6cmVxLmJvZHkgIH1cclxuICAgIClcclxuICAgICByZXMuc2VuZCh7c3RhdHVzOlwidXBkYXRlZCBcIn0pO1xyXG4gICAgXHJcbiAgfSk7XHJcblxyXG5cclxuXHJcbiAvL3RvIHVzZSB0aGUgcm91dGVzXHJcbiBcclxuIC8vaW1wb3J0IG1vbmdvb3NlXHJcbiBjb25zdCBtb25nb29zZSA9IHJlcXVpcmUoJ21vbmdvb3NlJyk7XHJcblxyXG4gLy9lc3RhYmxpc2ggY29ubmVjdGlvbiB0byBkYXRhYmFzZVxyXG4gbW9uZ29vc2UuY29ubmVjdChcclxuICAgIHByb2Nlc3MuZW52Lk1PTkdPREJfVVJJLFxyXG4gICAgIHt1c2VVbmlmaWVkVG9wb2xvZ3k6IHRydWUsIHVzZU5ld1VybFBhcnNlcjogdHJ1ZX0sXHJcbiAgICAgKGVycikgPT4ge1xyXG4gICAgICAgICBpZiAoZXJyKSByZXR1cm4gY29uc29sZS5sb2coXCJFcnJvcjogXCIsIGVycik7XHJcbiAgICAgICAgIGNvbnNvbGUubG9nKFwiTW9uZ29EQiBDb25uZWN0aW9uIC0tIFJlYWR5IHN0YXRlIGlzOlwiLCBtb25nb29zZS5jb25uZWN0aW9uLnJlYWR5U3RhdGUpO1xyXG4gICAgIH1cclxuICk7XHJcbiBcclxuIFxyXG5cclxuY29uc3QgbGlzdGVuZXIgPSBhcHAubGlzdGVuKHByb2Nlc3MuZW52LlBPUlQgfHwgNTAwMCwgKCkgPT4ge1xyXG4gICAgY29uc29sZS5sb2coJ1lvdXIgYXBwIGlzIGxpc3RlbmluZyBvbiBwb3J0ICcgKyBsaXN0ZW5lci5hZGRyZXNzKCkucG9ydClcclxufSlcclxubW9kdWxlLmV4cG9ydHMgPSBsaXN0ZW5lcjsiXX0=