function cov_cv78ivju9(){var path="C:\\Users\\USER\\Desktop\\andela new\\potofolioUpdate6\\server1\\controllers\\queries.js";var hash="99886ec67b3a6e2fd60e460239341fecc3caa413";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\USER\\Desktop\\andela new\\potofolioUpdate6\\server1\\controllers\\queries.js",statementMap:{"0":{start:{line:3,column:16},end:{line:3,column:44}},"1":{start:{line:4,column:10},end:{line:4,column:33}},"2":{start:{line:5,column:0},end:{line:5,column:27}},"3":{start:{line:9,column:21},end:{line:9,column:49}},"4":{start:{line:10,column:18},end:{line:10,column:56}},"5":{start:{line:11,column:4},end:{line:11,column:40}},"6":{start:{line:11,column:20},end:{line:11,column:40}},"7":{start:{line:12,column:4},end:{line:15,column:6}},"8":{start:{line:12,column:66},end:{line:12,column:100}},"9":{start:{line:12,column:74},end:{line:12,column:100}},"10":{start:{line:13,column:4},end:{line:13,column:17}},"11":{start:{line:14,column:4},end:{line:14,column:10}},"12":{start:{line:21,column:22},end:{line:28,column:1}},"13":{start:{line:22,column:4},end:{line:27,column:6}},"14":{start:{line:23,column:8},end:{line:25,column:9}},"15":{start:{line:24,column:12},end:{line:24,column:42}},"16":{start:{line:26,column:8},end:{line:26,column:30}},"17":{start:{line:31,column:19},end:{line:57,column:1}},"18":{start:{line:33,column:4},end:{line:56,column:6}},"19":{start:{line:36,column:8},end:{line:55,column:9}},"20":{start:{line:38,column:31},end:{line:44,column:14}},"21":{start:{line:47,column:12},end:{line:50,column:14}},"22":{start:{line:48,column:16},end:{line:48,column:54}},"23":{start:{line:48,column:24},end:{line:48,column:54}},"24":{start:{line:49,column:16},end:{line:49,column:38}},"25":{start:{line:53,column:12},end:{line:53,column:86}},"26":{start:{line:53,column:20},end:{line:53,column:86}},"27":{start:{line:54,column:12},end:{line:54,column:60}},"28":{start:{line:61,column:0},end:{line:68,column:3}}},fnMap:{"0":{name:"authenticateToken",decl:{start:{line:8,column:9},end:{line:8,column:26}},loc:{start:{line:8,column:43},end:{line:16,column:1}},line:8},"1":{name:"(anonymous_1)",decl:{start:{line:12,column:53},end:{line:12,column:54}},loc:{start:{line:12,column:65},end:{line:15,column:5}},line:12},"2":{name:"(anonymous_2)",decl:{start:{line:21,column:22},end:{line:21,column:23}},loc:{start:{line:21,column:36},end:{line:28,column:1}},line:21},"3":{name:"(anonymous_3)",decl:{start:{line:22,column:21},end:{line:22,column:22}},loc:{start:{line:22,column:34},end:{line:27,column:5}},line:22},"4":{name:"(anonymous_4)",decl:{start:{line:31,column:19},end:{line:31,column:20}},loc:{start:{line:31,column:33},end:{line:57,column:1}},line:31},"5":{name:"(anonymous_5)",decl:{start:{line:33,column:45},end:{line:33,column:46}},loc:{start:{line:33,column:60},end:{line:56,column:5}},line:33},"6":{name:"(anonymous_6)",decl:{start:{line:47,column:28},end:{line:47,column:29}},loc:{start:{line:47,column:41},end:{line:50,column:13}},line:47}},branchMap:{"0":{loc:{start:{line:10,column:18},end:{line:10,column:56}},type:"binary-expr",locations:[{start:{line:10,column:18},end:{line:10,column:28}},{start:{line:10,column:32},end:{line:10,column:56}}],line:10},"1":{loc:{start:{line:11,column:4},end:{line:11,column:40}},type:"if",locations:[{start:{line:11,column:4},end:{line:11,column:40}},{start:{line:11,column:4},end:{line:11,column:40}}],line:11},"2":{loc:{start:{line:12,column:66},end:{line:12,column:100}},type:"if",locations:[{start:{line:12,column:66},end:{line:12,column:100}},{start:{line:12,column:66},end:{line:12,column:100}}],line:12},"3":{loc:{start:{line:23,column:8},end:{line:25,column:9}},type:"if",locations:[{start:{line:23,column:8},end:{line:25,column:9}},{start:{line:23,column:8},end:{line:25,column:9}}],line:23},"4":{loc:{start:{line:36,column:8},end:{line:55,column:9}},type:"if",locations:[{start:{line:36,column:8},end:{line:55,column:9}},{start:{line:36,column:8},end:{line:55,column:9}}],line:36},"5":{loc:{start:{line:48,column:16},end:{line:48,column:54}},type:"if",locations:[{start:{line:48,column:16},end:{line:48,column:54}},{start:{line:48,column:16},end:{line:48,column:54}}],line:48},"6":{loc:{start:{line:53,column:12},end:{line:53,column:86}},type:"if",locations:[{start:{line:53,column:12},end:{line:53,column:86}},{start:{line:53,column:12},end:{line:53,column:86}}],line:53}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"99886ec67b3a6e2fd60e460239341fecc3caa413"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_cv78ivju9=function(){return actualCoverage;};}return actualCoverage;}cov_cv78ivju9();//import tea model
const queries=(cov_cv78ivju9().s[0]++,require('../models/queries'));const jwt=(cov_cv78ivju9().s[1]++,require('jsonwebtoken'));cov_cv78ivju9().s[2]++;require('dotenv').config();function authenticateToken(req,res,next){cov_cv78ivju9().f[0]++;const authHeader=(cov_cv78ivju9().s[3]++,req.headers['Authorization']);const token=(cov_cv78ivju9().s[4]++,(cov_cv78ivju9().b[0][0]++,authHeader)&&(cov_cv78ivju9().b[0][1]++,authHeader.split(' ')[1]));cov_cv78ivju9().s[5]++;if(token==null){cov_cv78ivju9().b[1][0]++;cov_cv78ivju9().s[6]++;return res.send(401);}else{cov_cv78ivju9().b[1][1]++;}cov_cv78ivju9().s[7]++;jwt.verify(token,process.env.ACCESS_TOKEN_SECRET,(err,user)=>{cov_cv78ivju9().f[1]++;cov_cv78ivju9().s[8]++;if(err){cov_cv78ivju9().b[2][0]++;cov_cv78ivju9().s[9]++;return res.sendStatus(403);}else{cov_cv78ivju9().b[2][1]++;}cov_cv78ivju9().s[10]++;req.user=user;cov_cv78ivju9().s[11]++;next();});}//GET all queries
cov_cv78ivju9().s[12]++;const getAllQueries=(req,res)=>{cov_cv78ivju9().f[2]++;cov_cv78ivju9().s[13]++;queries.find({},(err,data)=>{cov_cv78ivju9().f[3]++;cov_cv78ivju9().s[14]++;if(err){cov_cv78ivju9().b[3][0]++;cov_cv78ivju9().s[15]++;return res.json({Error:err});}else{cov_cv78ivju9().b[3][1]++;}cov_cv78ivju9().s[16]++;return res.json(data);});};// POST queries
cov_cv78ivju9().s[17]++;const newQueries=(req,res)=>{cov_cv78ivju9().f[4]++;cov_cv78ivju9().s[18]++;//check if the query name already exists in db
queries.findOne({name:req.body.name},(err,data)=>{cov_cv78ivju9().f[5]++;cov_cv78ivju9().s[19]++;//if query not in db, add it
if(!data){cov_cv78ivju9().b[4][0]++;//create a new tea object using the Tea model and req.body
const newQueries=(cov_cv78ivju9().s[20]++,new queries({name:req.body.name,email:req.body.email,message:req.body.message}));// save this object to database
cov_cv78ivju9().s[21]++;newQueries.save((err,data)=>{cov_cv78ivju9().f[6]++;cov_cv78ivju9().s[22]++;if(err){cov_cv78ivju9().b[5][0]++;cov_cv78ivju9().s[23]++;return res.json({Error:err});}else{cov_cv78ivju9().b[5][1]++;}cov_cv78ivju9().s[24]++;return res.json(data);});//if there's an error or the tea is in db, return a message         
}else{cov_cv78ivju9().b[4][1]++;cov_cv78ivju9().s[25]++;if(err){cov_cv78ivju9().b[6][0]++;cov_cv78ivju9().s[26]++;return res.json(`Something went wrong, please try again. ${err}`);}else{cov_cv78ivju9().b[6][1]++;}cov_cv78ivju9().s[27]++;return res.json({message:"Tea already exists"});}});};//export controller functions
cov_cv78ivju9().s[28]++;module.exports={getAllQueries,newQueries,authenticateToken//     allQueries
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInF1ZXJpZXMuanMiXSwibmFtZXMiOlsicXVlcmllcyIsInJlcXVpcmUiLCJqd3QiLCJjb25maWciLCJhdXRoZW50aWNhdGVUb2tlbiIsInJlcSIsInJlcyIsIm5leHQiLCJhdXRoSGVhZGVyIiwiaGVhZGVycyIsInRva2VuIiwic3BsaXQiLCJzZW5kIiwidmVyaWZ5IiwicHJvY2VzcyIsImVudiIsIkFDQ0VTU19UT0tFTl9TRUNSRVQiLCJlcnIiLCJ1c2VyIiwic2VuZFN0YXR1cyIsImdldEFsbFF1ZXJpZXMiLCJmaW5kIiwiZGF0YSIsImpzb24iLCJFcnJvciIsIm5ld1F1ZXJpZXMiLCJmaW5kT25lIiwibmFtZSIsImJvZHkiLCJlbWFpbCIsIm1lc3NhZ2UiLCJzYXZlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IjAzSkFlWTt5RkFkWjtBQUNBLEtBQU1BLENBQUFBLE9BQU8seUJBQUdDLE9BQU8sQ0FBQyxtQkFBRCxDQUFWLENBQWIsQ0FDQSxLQUFNQyxDQUFBQSxHQUFHLHlCQUFDRCxPQUFPLENBQUMsY0FBRCxDQUFSLENBQVQsQyx1QkFDQUEsT0FBTyxDQUFDLFFBQUQsQ0FBUCxDQUFrQkUsTUFBbEIsR0FHQSxRQUFTQyxDQUFBQSxpQkFBVCxDQUEyQkMsR0FBM0IsQ0FBZ0NDLEdBQWhDLENBQXFDQyxJQUFyQyxDQUEyQyx3QkFDdkMsS0FBTUMsQ0FBQUEsVUFBVSx5QkFBQ0gsR0FBRyxDQUFDSSxPQUFKLENBQVksZUFBWixDQUFELENBQWhCLENBQ0EsS0FBTUMsQ0FBQUEsS0FBSyx5QkFBRywyQkFBQUYsVUFBVSw4QkFBSUEsVUFBVSxDQUFDRyxLQUFYLENBQWlCLEdBQWpCLEVBQXNCLENBQXRCLENBQUosQ0FBYixDQUFYLENBRnVDLHVCQUd2QyxHQUFHRCxLQUFLLEVBQUUsSUFBVixDQUFnQix3REFBT0osQ0FBQUEsR0FBRyxDQUFDTSxJQUFKLENBQVMsR0FBVCxDQUFQLENBQW9CLENBQXBDLGdDQUh1Qyx1QkFJdkNWLEdBQUcsQ0FBQ1csTUFBSixDQUFXSCxLQUFYLENBQWlCSSxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsbUJBQTdCLENBQWlELENBQUNDLEdBQUQsQ0FBS0MsSUFBTCxHQUFZLCtDQUFDLEdBQUdELEdBQUgsQ0FBUSx3REFBT1gsQ0FBQUEsR0FBRyxDQUFDYSxVQUFKLENBQWUsR0FBZixDQUFQLENBQTBCLENBQWxDLGdDQUFELHdCQUM3RGQsR0FBRyxDQUFDYSxJQUFKLENBQVNBLElBQVQsQ0FENkQsd0JBRTdEWCxJQUFJLEdBQ0gsQ0FIRCxFQUlILENBSUQ7d0JBQ0EsS0FBTWEsQ0FBQUEsYUFBYSxDQUFHLENBQUNmLEdBQUQsQ0FBTUMsR0FBTixHQUFjLGdEQUNoQ04sT0FBTyxDQUFDcUIsSUFBUixDQUFhLEVBQWIsQ0FBaUIsQ0FBQ0osR0FBRCxDQUFNSyxJQUFOLEdBQWEsZ0RBQzFCLEdBQUlMLEdBQUosQ0FBUSxtREFDSixNQUFPWCxDQUFBQSxHQUFHLENBQUNpQixJQUFKLENBQVMsQ0FBQ0MsS0FBSyxDQUFFUCxHQUFSLENBQVQsQ0FBUCxDQUNILENBRkQsZ0NBRDBCLHdCQUkxQixNQUFPWCxDQUFBQSxHQUFHLENBQUNpQixJQUFKLENBQVNELElBQVQsQ0FBUCxDQUNILENBTEQsRUFNSCxDQVBELENBU0E7d0JBQ0EsS0FBTUcsQ0FBQUEsVUFBVSxDQUFHLENBQUNwQixHQUFELENBQU1DLEdBQU4sR0FBYyxnREFDN0I7QUFDQU4sT0FBTyxDQUFDMEIsT0FBUixDQUFnQixDQUFFQyxJQUFJLENBQUV0QixHQUFHLENBQUN1QixJQUFKLENBQVNELElBQWpCLENBQWhCLENBQXlDLENBQUNWLEdBQUQsQ0FBTUssSUFBTixHQUFlLGdEQUVwRDtBQUNBLEdBQUksQ0FBQ0EsSUFBTCxDQUFXLDJCQUNQO0FBQ0EsS0FBTUcsQ0FBQUEsVUFBVSwwQkFBRyxHQUFJekIsQ0FBQUEsT0FBSixDQUFZLENBQzNCMkIsSUFBSSxDQUFDdEIsR0FBRyxDQUFDdUIsSUFBSixDQUFTRCxJQURhLENBRTNCRSxLQUFLLENBQUN4QixHQUFHLENBQUN1QixJQUFKLENBQVNDLEtBRlksQ0FHM0JDLE9BQU8sQ0FBQ3pCLEdBQUcsQ0FBQ3VCLElBQUosQ0FBU0UsT0FIVSxDQUFaLENBQUgsQ0FBaEIsQ0FRQTtBQVZPLHdCQVdQTCxVQUFVLENBQUNNLElBQVgsQ0FBZ0IsQ0FBQ2QsR0FBRCxDQUFNSyxJQUFOLEdBQWEsZ0RBQ3pCLEdBQUdMLEdBQUgsQ0FBUSx5REFBT1gsQ0FBQUEsR0FBRyxDQUFDaUIsSUFBSixDQUFTLENBQUNDLEtBQUssQ0FBRVAsR0FBUixDQUFULENBQVAsQ0FBOEIsQ0FBdEMsZ0NBRHlCLHdCQUV6QixNQUFPWCxDQUFBQSxHQUFHLENBQUNpQixJQUFKLENBQVNELElBQVQsQ0FBUCxDQUNILENBSEQsRUFJSjtBQUNDLENBaEJELElBZ0JLLG1EQUNELEdBQUdMLEdBQUgsQ0FBUSx5REFBT1gsQ0FBQUEsR0FBRyxDQUFDaUIsSUFBSixDQUFVLDJDQUEwQ04sR0FBSSxFQUF4RCxDQUFQLENBQWtFLENBQTFFLGdDQURDLHdCQUVELE1BQU9YLENBQUFBLEdBQUcsQ0FBQ2lCLElBQUosQ0FBUyxDQUFDTyxPQUFPLENBQUMsb0JBQVQsQ0FBVCxDQUFQLENBQ0gsQ0FDSixDQXZCRCxFQXdCSCxDQTFCRCxDQTZCQTt3QkFDQUUsTUFBTSxDQUFDQyxPQUFQLENBQWlCLENBQ2JiLGFBRGEsQ0FFYkssVUFGYSxDQUtickIsaUJBQ0o7QUFOaUIsQ0FBakIiLCJzb3VyY2VzQ29udGVudCI6WyJcclxuLy9pbXBvcnQgdGVhIG1vZGVsXHJcbmNvbnN0IHF1ZXJpZXMgPSByZXF1aXJlKCcuLi9tb2RlbHMvcXVlcmllcycpO1xyXG5jb25zdCBqd3Q9cmVxdWlyZSgnanNvbndlYnRva2VuJyk7XHJcbnJlcXVpcmUoJ2RvdGVudicpLmNvbmZpZygpO1xyXG5cclxuXHJcbmZ1bmN0aW9uIGF1dGhlbnRpY2F0ZVRva2VuKHJlcSwgcmVzLCBuZXh0KSB7XHJcbiAgICBjb25zdCBhdXRoSGVhZGVyPXJlcS5oZWFkZXJzWydBdXRob3JpemF0aW9uJ11cclxuICAgIGNvbnN0IHRva2VuID0gYXV0aEhlYWRlciAmJiBhdXRoSGVhZGVyLnNwbGl0KCcgJylbMV07XHJcbiAgICBpZih0b2tlbj09bnVsbCkgcmV0dXJuIHJlcy5zZW5kKDQwMSlcclxuICAgIGp3dC52ZXJpZnkodG9rZW4scHJvY2Vzcy5lbnYuQUNDRVNTX1RPS0VOX1NFQ1JFVCwoZXJyLHVzZXIpPT57aWYoZXJyKSByZXR1cm4gcmVzLnNlbmRTdGF0dXMoNDAzKVxyXG4gICAgcmVxLnVzZXI9dXNlclxyXG4gICAgbmV4dCgpXHJcbiAgICB9KVxyXG59XHJcblxyXG5cclxuXHJcbi8vR0VUIGFsbCBxdWVyaWVzXHJcbmNvbnN0IGdldEFsbFF1ZXJpZXMgPSAocmVxLCByZXMpID0+IHtcclxuICAgIHF1ZXJpZXMuZmluZCh7fSwgKGVyciwgZGF0YSk9PntcclxuICAgICAgICBpZiAoZXJyKXtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKHtFcnJvcjogZXJyfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXMuanNvbihkYXRhKTtcclxuICAgIH0pXHJcbn07XHJcblxyXG4vLyBQT1NUIHF1ZXJpZXNcclxuY29uc3QgbmV3UXVlcmllcyA9IChyZXEsIHJlcykgPT4ge1xyXG4gICAgLy9jaGVjayBpZiB0aGUgcXVlcnkgbmFtZSBhbHJlYWR5IGV4aXN0cyBpbiBkYlxyXG4gICAgcXVlcmllcy5maW5kT25lKHsgbmFtZTogcmVxLmJvZHkubmFtZSB9LCAoZXJyLCBkYXRhKSA9PiB7XHJcblxyXG4gICAgICAgIC8vaWYgcXVlcnkgbm90IGluIGRiLCBhZGQgaXRcclxuICAgICAgICBpZiAoIWRhdGEpIHtcclxuICAgICAgICAgICAgLy9jcmVhdGUgYSBuZXcgdGVhIG9iamVjdCB1c2luZyB0aGUgVGVhIG1vZGVsIGFuZCByZXEuYm9keVxyXG4gICAgICAgICAgICBjb25zdCBuZXdRdWVyaWVzID0gbmV3IHF1ZXJpZXMoe1xyXG4gICAgICAgICAgICAgICAgbmFtZTpyZXEuYm9keS5uYW1lLFxyXG4gICAgICAgICAgICAgICAgZW1haWw6cmVxLmJvZHkuZW1haWwsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOnJlcS5ib2R5Lm1lc3NhZ2UsXHJcbiAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICAvLyBzYXZlIHRoaXMgb2JqZWN0IHRvIGRhdGFiYXNlXHJcbiAgICAgICAgICAgIG5ld1F1ZXJpZXMuc2F2ZSgoZXJyLCBkYXRhKT0+e1xyXG4gICAgICAgICAgICAgICAgaWYoZXJyKSByZXR1cm4gcmVzLmpzb24oe0Vycm9yOiBlcnJ9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXMuanNvbihkYXRhKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAvL2lmIHRoZXJlJ3MgYW4gZXJyb3Igb3IgdGhlIHRlYSBpcyBpbiBkYiwgcmV0dXJuIGEgbWVzc2FnZSAgICAgICAgIFxyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBpZihlcnIpIHJldHVybiByZXMuanNvbihgU29tZXRoaW5nIHdlbnQgd3JvbmcsIHBsZWFzZSB0cnkgYWdhaW4uICR7ZXJyfWApO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oe21lc3NhZ2U6XCJUZWEgYWxyZWFkeSBleGlzdHNcIn0pO1xyXG4gICAgICAgIH1cclxuICAgIH0pICAgIFxyXG59O1xyXG5cclxuXHJcbi8vZXhwb3J0IGNvbnRyb2xsZXIgZnVuY3Rpb25zXHJcbm1vZHVsZS5leHBvcnRzID0ge1xyXG4gICAgZ2V0QWxsUXVlcmllcywgXHJcbiAgICBuZXdRdWVyaWVzLFxyXG4gICAgXHJcbiAgIFxyXG4gICAgYXV0aGVudGljYXRlVG9rZW4sXHJcbi8vICAgICBhbGxRdWVyaWVzXHJcbiB9OyJdfQ==