function cov_12vrm02vp2(){var path="C:\\Users\\USER\\Desktop\\andela new\\potofolioUpdate6\\server1\\controllers\\article.js";var hash="97e59d1ce3df368ee43338a8a712d3c88bdcda0e";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\USER\\Desktop\\andela new\\potofolioUpdate6\\server1\\controllers\\article.js",statementMap:{"0":{start:{line:3,column:17},end:{line:3,column:46}},"1":{start:{line:5,column:13},end:{line:5,column:38}},"2":{start:{line:6,column:16},end:{line:6,column:45}},"3":{start:{line:7,column:17},end:{line:7,column:36}},"4":{start:{line:11,column:14},end:{line:11,column:40}},"5":{start:{line:16,column:22},end:{line:23,column:1}},"6":{start:{line:17,column:4},end:{line:22,column:6}},"7":{start:{line:18,column:8},end:{line:20,column:9}},"8":{start:{line:19,column:12},end:{line:19,column:42}},"9":{start:{line:21,column:8},end:{line:21,column:30}},"10":{start:{line:26,column:20},end:{line:51,column:1}},"11":{start:{line:28,column:4},end:{line:50,column:6}},"12":{start:{line:31,column:8},end:{line:49,column:9}},"13":{start:{line:33,column:32},end:{line:38,column:14}},"14":{start:{line:41,column:12},end:{line:44,column:14}},"15":{start:{line:42,column:16},end:{line:42,column:54}},"16":{start:{line:42,column:24},end:{line:42,column:54}},"17":{start:{line:43,column:16},end:{line:43,column:38}},"18":{start:{line:47,column:12},end:{line:47,column:86}},"19":{start:{line:47,column:20},end:{line:47,column:86}},"20":{start:{line:48,column:12},end:{line:48,column:64}},"21":{start:{line:56,column:22},end:{line:66,column:1}},"22":{start:{line:57,column:16},end:{line:57,column:32}},"23":{start:{line:60,column:4},end:{line:65,column:7}},"24":{start:{line:61,column:4},end:{line:64,column:31}},"25":{start:{line:62,column:8},end:{line:62,column:61}},"26":{start:{line:64,column:9},end:{line:64,column:31}},"27":{start:{line:69,column:25},end:{line:80,column:1}},"28":{start:{line:70,column:16},end:{line:70,column:32}},"29":{start:{line:72,column:4},end:{line:79,column:7}},"30":{start:{line:74,column:4},end:{line:78,column:56}},"31":{start:{line:74,column:32},end:{line:74,column:85}},"32":{start:{line:76,column:9},end:{line:78,column:56}},"33":{start:{line:76,column:18},end:{line:76,column:84}},"34":{start:{line:78,column:9},end:{line:78,column:56}},"35":{start:{line:83,column:19},end:{line:108,column:3}},"36":{start:{line:84,column:16},end:{line:84,column:32}},"37":{start:{line:85,column:21},end:{line:85,column:38}},"38":{start:{line:87,column:21},end:{line:90,column:5}},"39":{start:{line:92,column:4},end:{line:107,column:6}},"40":{start:{line:93,column:8},end:{line:106,column:9}},"41":{start:{line:94,column:12},end:{line:94,column:65}},"42":{start:{line:98,column:12},end:{line:98,column:41}},"43":{start:{line:100,column:12},end:{line:105,column:14}},"44":{start:{line:101,column:16},end:{line:103,column:17}},"45":{start:{line:102,column:16},end:{line:102,column:80}},"46":{start:{line:104,column:16},end:{line:104,column:38}},"47":{start:{line:111,column:13},end:{line:136,column:3}},"48":{start:{line:112,column:16},end:{line:112,column:32}},"49":{start:{line:113,column:19},end:{line:113,column:33}},"50":{start:{line:115,column:17},end:{line:118,column:5}},"51":{start:{line:120,column:4},end:{line:135,column:6}},"52":{start:{line:121,column:8},end:{line:134,column:9}},"53":{start:{line:122,column:12},end:{line:122,column:65}},"54":{start:{line:126,column:12},end:{line:126,column:34}},"55":{start:{line:128,column:12},end:{line:133,column:14}},"56":{start:{line:129,column:16},end:{line:131,column:17}},"57":{start:{line:130,column:16},end:{line:130,column:80}},"58":{start:{line:132,column:16},end:{line:132,column:38}},"59":{start:{line:140,column:19},end:{line:156,column:5}},"60":{start:{line:141,column:4},end:{line:141,column:32}},"61":{start:{line:142,column:7},end:{line:155,column:6}},"62":{start:{line:150,column:8},end:{line:150,column:55}},"63":{start:{line:153,column:8},end:{line:153,column:27}},"64":{start:{line:154,column:8},end:{line:154,column:41}},"65":{start:{line:158,column:0},end:{line:168,column:2}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:16,column:22},end:{line:16,column:23}},loc:{start:{line:16,column:36},end:{line:23,column:1}},line:16},"1":{name:"(anonymous_1)",decl:{start:{line:17,column:22},end:{line:17,column:23}},loc:{start:{line:17,column:35},end:{line:22,column:5}},line:17},"2":{name:"(anonymous_2)",decl:{start:{line:26,column:20},end:{line:26,column:21}},loc:{start:{line:26,column:34},end:{line:51,column:1}},line:26},"3":{name:"(anonymous_3)",decl:{start:{line:28,column:60},end:{line:28,column:61}},loc:{start:{line:28,column:75},end:{line:50,column:5}},line:28},"4":{name:"(anonymous_4)",decl:{start:{line:41,column:29},end:{line:41,column:30}},loc:{start:{line:41,column:42},end:{line:44,column:13}},line:41},"5":{name:"(anonymous_5)",decl:{start:{line:56,column:22},end:{line:56,column:23}},loc:{start:{line:56,column:36},end:{line:66,column:1}},line:56},"6":{name:"(anonymous_6)",decl:{start:{line:60,column:36},end:{line:60,column:37}},loc:{start:{line:60,column:51},end:{line:65,column:5}},line:60},"7":{name:"(anonymous_7)",decl:{start:{line:69,column:25},end:{line:69,column:26}},loc:{start:{line:69,column:39},end:{line:80,column:1}},line:69},"8":{name:"(anonymous_8)",decl:{start:{line:72,column:38},end:{line:72,column:39}},loc:{start:{line:72,column:53},end:{line:79,column:5}},line:72},"9":{name:"(anonymous_9)",decl:{start:{line:83,column:19},end:{line:83,column:20}},loc:{start:{line:83,column:33},end:{line:108,column:3}},line:83},"10":{name:"(anonymous_10)",decl:{start:{line:92,column:36},end:{line:92,column:37}},loc:{start:{line:92,column:51},end:{line:107,column:5}},line:92},"11":{name:"(anonymous_11)",decl:{start:{line:100,column:22},end:{line:100,column:23}},loc:{start:{line:100,column:29},end:{line:105,column:13}},line:100},"12":{name:"(anonymous_12)",decl:{start:{line:111,column:13},end:{line:111,column:14}},loc:{start:{line:111,column:27},end:{line:136,column:3}},line:111},"13":{name:"(anonymous_13)",decl:{start:{line:120,column:36},end:{line:120,column:37}},loc:{start:{line:120,column:51},end:{line:135,column:5}},line:120},"14":{name:"(anonymous_14)",decl:{start:{line:128,column:22},end:{line:128,column:23}},loc:{start:{line:128,column:29},end:{line:133,column:13}},line:128},"15":{name:"(anonymous_15)",decl:{start:{line:140,column:19},end:{line:140,column:20}},loc:{start:{line:140,column:33},end:{line:156,column:5}},line:140},"16":{name:"(anonymous_16)",decl:{start:{line:149,column:13},end:{line:149,column:14}},loc:{start:{line:149,column:21},end:{line:152,column:5}},line:149},"17":{name:"(anonymous_17)",decl:{start:{line:152,column:13},end:{line:152,column:14}},loc:{start:{line:152,column:18},end:{line:155,column:5}},line:152}},branchMap:{"0":{loc:{start:{line:18,column:8},end:{line:20,column:9}},type:"if",locations:[{start:{line:18,column:8},end:{line:20,column:9}},{start:{line:18,column:8},end:{line:20,column:9}}],line:18},"1":{loc:{start:{line:31,column:8},end:{line:49,column:9}},type:"if",locations:[{start:{line:31,column:8},end:{line:49,column:9}},{start:{line:31,column:8},end:{line:49,column:9}}],line:31},"2":{loc:{start:{line:42,column:16},end:{line:42,column:54}},type:"if",locations:[{start:{line:42,column:16},end:{line:42,column:54}},{start:{line:42,column:16},end:{line:42,column:54}}],line:42},"3":{loc:{start:{line:47,column:12},end:{line:47,column:86}},type:"if",locations:[{start:{line:47,column:12},end:{line:47,column:86}},{start:{line:47,column:12},end:{line:47,column:86}}],line:47},"4":{loc:{start:{line:61,column:4},end:{line:64,column:31}},type:"if",locations:[{start:{line:61,column:4},end:{line:64,column:31}},{start:{line:61,column:4},end:{line:64,column:31}}],line:61},"5":{loc:{start:{line:61,column:7},end:{line:61,column:19}},type:"binary-expr",locations:[{start:{line:61,column:7},end:{line:61,column:10}},{start:{line:61,column:14},end:{line:61,column:19}}],line:61},"6":{loc:{start:{line:74,column:4},end:{line:78,column:56}},type:"if",locations:[{start:{line:74,column:4},end:{line:78,column:56}},{start:{line:74,column:4},end:{line:78,column:56}}],line:74},"7":{loc:{start:{line:76,column:9},end:{line:78,column:56}},type:"if",locations:[{start:{line:76,column:9},end:{line:78,column:56}},{start:{line:76,column:9},end:{line:78,column:56}}],line:76},"8":{loc:{start:{line:93,column:8},end:{line:106,column:9}},type:"if",locations:[{start:{line:93,column:8},end:{line:106,column:9}},{start:{line:93,column:8},end:{line:106,column:9}}],line:93},"9":{loc:{start:{line:93,column:11},end:{line:93,column:38}},type:"binary-expr",locations:[{start:{line:93,column:11},end:{line:93,column:14}},{start:{line:93,column:18},end:{line:93,column:23}},{start:{line:93,column:27},end:{line:93,column:38}}],line:93},"10":{loc:{start:{line:101,column:16},end:{line:103,column:17}},type:"if",locations:[{start:{line:101,column:16},end:{line:103,column:17}},{start:{line:101,column:16},end:{line:103,column:17}}],line:101},"11":{loc:{start:{line:121,column:8},end:{line:134,column:9}},type:"if",locations:[{start:{line:121,column:8},end:{line:134,column:9}},{start:{line:121,column:8},end:{line:134,column:9}}],line:121},"12":{loc:{start:{line:121,column:11},end:{line:121,column:38}},type:"binary-expr",locations:[{start:{line:121,column:11},end:{line:121,column:14}},{start:{line:121,column:18},end:{line:121,column:23}},{start:{line:121,column:27},end:{line:121,column:38}}],line:121},"13":{loc:{start:{line:129,column:16},end:{line:131,column:17}},type:"if",locations:[{start:{line:129,column:16},end:{line:131,column:17}},{start:{line:129,column:16},end:{line:131,column:17}}],line:129}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0,0],"10":[0,0],"11":[0,0],"12":[0,0,0],"13":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"97e59d1ce3df368ee43338a8a712d3c88bdcda0e"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_12vrm02vp2=function(){return actualCoverage;};}return actualCoverage;}cov_12vrm02vp2();//import tea model
const articles=(cov_12vrm02vp2().s[0]++,require('../models/articles'));// importing user context
const User=(cov_12vrm02vp2().s[1]++,require("../models/user"));const blog_like=(cov_12vrm02vp2().s[2]++,require("../models/blogLike"));const mongoose=(cov_12vrm02vp2().s[3]++,require("mongoose"));// const auth = require("../middleware/authServer");
var session=(cov_12vrm02vp2().s[4]++,require('express-session'));//GET all queries
cov_12vrm02vp2().s[5]++;const getAllArticles=(req,res)=>{cov_12vrm02vp2().f[0]++;cov_12vrm02vp2().s[6]++;articles.find({},(err,data)=>{cov_12vrm02vp2().f[1]++;cov_12vrm02vp2().s[7]++;if(err){cov_12vrm02vp2().b[0][0]++;cov_12vrm02vp2().s[8]++;return res.json({Error:err});}else{cov_12vrm02vp2().b[0][1]++;}cov_12vrm02vp2().s[9]++;return res.json(data);});};//POST queries
cov_12vrm02vp2().s[10]++;const newArticles=(req,res)=>{cov_12vrm02vp2().f[2]++;cov_12vrm02vp2().s[11]++;//check if the query name already exists in db
articles.findOne({articleBody:req.body.articleBody},(err,data)=>{cov_12vrm02vp2().f[3]++;cov_12vrm02vp2().s[12]++;//if query not in db, add it
if(!data){cov_12vrm02vp2().b[1][0]++;//create a new tea object using the Tea model and req.body
const newArticles=(cov_12vrm02vp2().s[13]++,new articles({img:req.body.img,title:req.body.title,author:req.body.author,articleBody:req.body.articleBody}));// save this object to database
cov_12vrm02vp2().s[14]++;newArticles.save((err,data)=>{cov_12vrm02vp2().f[4]++;cov_12vrm02vp2().s[15]++;if(err){cov_12vrm02vp2().b[2][0]++;cov_12vrm02vp2().s[16]++;return res.json({Error:err});}else{cov_12vrm02vp2().b[2][1]++;}cov_12vrm02vp2().s[17]++;return res.json(data);});//if there's an error or the tea is in db, return a message         
}else{cov_12vrm02vp2().b[1][1]++;cov_12vrm02vp2().s[18]++;if(err){cov_12vrm02vp2().b[3][0]++;cov_12vrm02vp2().s[19]++;return res.json(`Something went wrong, please try again. ${err}`);}else{cov_12vrm02vp2().b[3][1]++;}cov_12vrm02vp2().s[20]++;return res.json({message:"article already exists"});}});};//GET '//:name'
cov_12vrm02vp2().s[21]++;const getOneArticle=(req,res)=>{cov_12vrm02vp2().f[5]++;let title=(cov_12vrm02vp2().s[22]++,req.params.title);//get the tea name
//find the specific tea with that name
cov_12vrm02vp2().s[23]++;articles.findOne({title:title},(err,data)=>{cov_12vrm02vp2().f[6]++;cov_12vrm02vp2().s[24]++;if((cov_12vrm02vp2().b[5][0]++,err)||(cov_12vrm02vp2().b[5][1]++,!data)){cov_12vrm02vp2().b[4][0]++;cov_12vrm02vp2().s[25]++;return res.json({message:"article doesn't exist."});}else{cov_12vrm02vp2().b[4][1]++;cov_12vrm02vp2().s[26]++;return res.json(data);}//return the tea object if found
});};//DELETE 1 article
cov_12vrm02vp2().s[27]++;const deleteOneArticle=(req,res)=>{cov_12vrm02vp2().f[7]++;let title=(cov_12vrm02vp2().s[28]++,req.params.title);// get the name of article to delete
cov_12vrm02vp2().s[29]++;articles.deleteOne({title:title},(err,data)=>{cov_12vrm02vp2().f[8]++;cov_12vrm02vp2().s[30]++;//if there's nothing to delete return a message
if(data.deletedCount==0){cov_12vrm02vp2().b[6][0]++;cov_12vrm02vp2().s[31]++;return res.json({message:"article doesn't exist."});}//else if there's an error, return the err message
else{cov_12vrm02vp2().b[6][1]++;cov_12vrm02vp2().s[32]++;if(err){cov_12vrm02vp2().b[7][0]++;cov_12vrm02vp2().s[33]++;return res.json(`Something went wrong, please try again. ${err}`);}//else, return the success message
else{cov_12vrm02vp2().b[7][1]++;cov_12vrm02vp2().s[34]++;return res.json({message:"article deleted."});}}});};//POST 1 article comment
cov_12vrm02vp2().s[35]++;const newComment=(req,res)=>{cov_12vrm02vp2().f[9]++;let title=(cov_12vrm02vp2().s[36]++,req.params.title);//get the tea to add the comment in
let newComment=(cov_12vrm02vp2().s[37]++,req.body.comments);//get the comment
//create a comment object to push
const comments=(cov_12vrm02vp2().s[38]++,{text:newComment,date:new Date()});//find the article object
cov_12vrm02vp2().s[39]++;articles.findOne({title:title},(err,data)=>{cov_12vrm02vp2().f[10]++;cov_12vrm02vp2().s[40]++;if((cov_12vrm02vp2().b[9][0]++,err)||(cov_12vrm02vp2().b[9][1]++,!data)||(cov_12vrm02vp2().b[9][2]++,!newComment)){cov_12vrm02vp2().b[8][0]++;cov_12vrm02vp2().s[41]++;return res.json({message:"article doesn't exist."});}else{cov_12vrm02vp2().b[8][1]++;cov_12vrm02vp2().s[42]++;//add comment to comments array of the  object
data.comments.push(comments);//save changes to db
cov_12vrm02vp2().s[43]++;data.save(err=>{cov_12vrm02vp2().f[11]++;cov_12vrm02vp2().s[44]++;if(err){cov_12vrm02vp2().b[10][0]++;cov_12vrm02vp2().s[45]++;return res.json({message:"Comment failed to add.",error:err});}else{cov_12vrm02vp2().b[10][1]++;}cov_12vrm02vp2().s[46]++;return res.json(data);});}});};//POST 1 article comment
cov_12vrm02vp2().s[47]++;const likes=(req,res)=>{cov_12vrm02vp2().f[12]++;let title=(cov_12vrm02vp2().s[48]++,req.params.title);//get the tea to add the comment in
let newLikes=(cov_12vrm02vp2().s[49]++,req.body.likes);//get the comment
//create a comment object to push
const like=(cov_12vrm02vp2().s[50]++,{text:newLikes,date:new Date()});//find the article object
cov_12vrm02vp2().s[51]++;articles.findOne({title:title},(err,data)=>{cov_12vrm02vp2().f[13]++;cov_12vrm02vp2().s[52]++;if((cov_12vrm02vp2().b[12][0]++,err)||(cov_12vrm02vp2().b[12][1]++,!data)||(cov_12vrm02vp2().b[12][2]++,!newComment)){cov_12vrm02vp2().b[11][0]++;cov_12vrm02vp2().s[53]++;return res.json({message:"article doesn't exist."});}else{cov_12vrm02vp2().b[11][1]++;cov_12vrm02vp2().s[54]++;//add comment to comments array of the  object
data.likes.push(like);//save changes to db
cov_12vrm02vp2().s[55]++;data.save(err=>{cov_12vrm02vp2().f[14]++;cov_12vrm02vp2().s[56]++;if(err){cov_12vrm02vp2().b[13][0]++;cov_12vrm02vp2().s[57]++;return res.json({message:"Comment failed to add.",error:err});}else{cov_12vrm02vp2().b[13][1]++;}cov_12vrm02vp2().s[58]++;return res.json(data);});}});};cov_12vrm02vp2().s[59]++;const newUpdates=(req,res)=>{cov_12vrm02vp2().f[15]++;cov_12vrm02vp2().s[60]++;console.log(req.params._id);cov_12vrm02vp2().s[61]++;articles.findByIdAndUpdate({_id:req.params._id},{$set:{img:req.body.img,title:req.body.title,author:req.body.author,articleBody:req.body.articleBody}}).then(result=>{cov_12vrm02vp2().f[16]++;cov_12vrm02vp2().s[62]++;res.status(200).json({updated_articles:result});}).catch(err=>{cov_12vrm02vp2().f[17]++;cov_12vrm02vp2().s[63]++;console.error(err);cov_12vrm02vp2().s[64]++;res.status(500).json({error:err});});};//export controller functions
cov_12vrm02vp2().s[65]++;module.exports={getAllArticles,newArticles,getOneArticle,deleteOneArticle,newComment,likes,newUpdates};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFydGljbGUuanMiXSwibmFtZXMiOlsiYXJ0aWNsZXMiLCJyZXF1aXJlIiwiVXNlciIsImJsb2dfbGlrZSIsIm1vbmdvb3NlIiwic2Vzc2lvbiIsImdldEFsbEFydGljbGVzIiwicmVxIiwicmVzIiwiZmluZCIsImVyciIsImRhdGEiLCJqc29uIiwiRXJyb3IiLCJuZXdBcnRpY2xlcyIsImZpbmRPbmUiLCJhcnRpY2xlQm9keSIsImJvZHkiLCJpbWciLCJ0aXRsZSIsImF1dGhvciIsInNhdmUiLCJtZXNzYWdlIiwiZ2V0T25lQXJ0aWNsZSIsInBhcmFtcyIsImRlbGV0ZU9uZUFydGljbGUiLCJkZWxldGVPbmUiLCJkZWxldGVkQ291bnQiLCJuZXdDb21tZW50IiwiY29tbWVudHMiLCJ0ZXh0IiwiZGF0ZSIsIkRhdGUiLCJwdXNoIiwiZXJyb3IiLCJsaWtlcyIsIm5ld0xpa2VzIiwibGlrZSIsIm5ld1VwZGF0ZXMiLCJjb25zb2xlIiwibG9nIiwiX2lkIiwiZmluZEJ5SWRBbmRVcGRhdGUiLCIkc2V0IiwidGhlbiIsInJlc3VsdCIsInN0YXR1cyIsInVwZGF0ZWRfYXJ0aWNsZXMiLCJjYXRjaCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJzOVVBZVk7MkZBZFo7QUFDQSxLQUFNQSxDQUFBQSxRQUFRLDBCQUFHQyxPQUFPLENBQUMsb0JBQUQsQ0FBVixDQUFkLENBQ0E7QUFDQSxLQUFNQyxDQUFBQSxJQUFJLDBCQUFHRCxPQUFPLENBQUMsZ0JBQUQsQ0FBVixDQUFWLENBQ0EsS0FBTUUsQ0FBQUEsU0FBUywwQkFBQ0YsT0FBTyxDQUFDLG9CQUFELENBQVIsQ0FBZixDQUNBLEtBQU1HLENBQUFBLFFBQVEsMEJBQUdILE9BQU8sQ0FBQyxVQUFELENBQVYsQ0FBZCxDQUNBO0FBR0EsR0FBSUksQ0FBQUEsT0FBTywwQkFBR0osT0FBTyxDQUFDLGlCQUFELENBQVYsQ0FBWCxDQUlBO3dCQUNBLEtBQU1LLENBQUFBLGNBQWMsQ0FBRSxDQUFDQyxHQUFE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QUFxQixDQUFDbUMsZ0JBQWdCLENBQUNGLE1BQWxCLENBQXJCLEVBRUgsQ0FWRSxFQVVBRyxLQVZBLENBVU10QyxHQUFHLEVBQUUsbURBQ1Y2QixPQUFPLENBQUNMLEtBQVIsQ0FBY3hCLEdBQWQsRUFEVSx5QkFFVkYsR0FBRyxDQUFDc0MsTUFBSixDQUFXLEdBQVgsRUFBZ0JsQyxJQUFoQixDQUFxQixDQUFDc0IsS0FBSyxDQUFDeEIsR0FBUCxDQUFyQixFQUNILENBYkUsRUFjRixDQWhCSCxDQWlCRjt5QkFDQXVDLE1BQU0sQ0FBQ0MsT0FBUCxDQUFpQixDQUNiNUMsY0FEYSxDQUViUSxXQUZhLENBR2JTLGFBSGEsQ0FJZEUsZ0JBSmMsQ0FLYkcsVUFMYSxDQU1iTyxLQU5hLENBT2JHLFVBUGEsQ0FBakIiLCJzb3VyY2VzQ29udGVudCI6WyJcclxuLy9pbXBvcnQgdGVhIG1vZGVsXHJcbmNvbnN0IGFydGljbGVzID0gcmVxdWlyZSgnLi4vbW9kZWxzL2FydGljbGVzJyk7XHJcbi8vIGltcG9ydGluZyB1c2VyIGNvbnRleHRcclxuY29uc3QgVXNlciA9IHJlcXVpcmUoXCIuLi9tb2RlbHMvdXNlclwiKTtcclxuY29uc3QgYmxvZ19saWtlPXJlcXVpcmUoXCIuLi9tb2RlbHMvYmxvZ0xpa2VcIik7XHJcbmNvbnN0IG1vbmdvb3NlID0gcmVxdWlyZShcIm1vbmdvb3NlXCIpO1xyXG4vLyBjb25zdCBhdXRoID0gcmVxdWlyZShcIi4uL21pZGRsZXdhcmUvYXV0aFNlcnZlclwiKTtcclxuXHJcblxyXG52YXIgc2Vzc2lvbiA9IHJlcXVpcmUoJ2V4cHJlc3Mtc2Vzc2lvbicpXHJcblxyXG5cclxuXHJcbi8vR0VUIGFsbCBxdWVyaWVzXHJcbmNvbnN0IGdldEFsbEFydGljbGVzID0ocmVxLCByZXMpID0+IHtcclxuICAgIGFydGljbGVzLmZpbmQoe30sIChlcnIsIGRhdGEpPT57XHJcbiAgICAgICAgaWYgKGVycil7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuanNvbih7RXJyb3I6IGVycn0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzLmpzb24oZGF0YSk7XHJcbiAgICB9KVxyXG59O1xyXG5cclxuLy9QT1NUIHF1ZXJpZXNcclxuY29uc3QgbmV3QXJ0aWNsZXMgPSAocmVxLCByZXMpID0+IHtcclxuICAgIC8vY2hlY2sgaWYgdGhlIHF1ZXJ5IG5hbWUgYWxyZWFkeSBleGlzdHMgaW4gZGJcclxuICAgIGFydGljbGVzLmZpbmRPbmUoeyBhcnRpY2xlQm9keTogcmVxLmJvZHkuYXJ0aWNsZUJvZHkgfSwgKGVyciwgZGF0YSkgPT4ge1xyXG5cclxuICAgICAgICAvL2lmIHF1ZXJ5IG5vdCBpbiBkYiwgYWRkIGl0XHJcbiAgICAgICAgaWYgKCFkYXRhKSB7XHJcbiAgICAgICAgICAgIC8vY3JlYXRlIGEgbmV3IHRlYSBvYmplY3QgdXNpbmcgdGhlIFRlYSBtb2RlbCBhbmQgcmVxLmJvZHlcclxuICAgICAgICAgICAgY29uc3QgbmV3QXJ0aWNsZXMgPSBuZXcgYXJ0aWNsZXMoe1xyXG4gICAgICAgICAgICAgICAgaW1nOnJlcS5ib2R5LmltZyxcclxuICAgICAgICAgICAgICAgIHRpdGxlOnJlcS5ib2R5LnRpdGxlLFxyXG4gICAgICAgICAgICAgICAgYXV0aG9yOnJlcS5ib2R5LmF1dGhvcixcclxuICAgICAgICAgICAgICAgIGFydGljbGVCb2R5OnJlcS5ib2R5LmFydGljbGVCb2R5LCAgIFxyXG4gICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgLy8gc2F2ZSB0aGlzIG9iamVjdCB0byBkYXRhYmFzZVxyXG4gICAgICAgICAgICBuZXdBcnRpY2xlcy5zYXZlKChlcnIsIGRhdGEpPT57XHJcbiAgICAgICAgICAgICAgICBpZihlcnIpIHJldHVybiByZXMuanNvbih7RXJyb3I6IGVycn0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKGRhdGEpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIC8vaWYgdGhlcmUncyBhbiBlcnJvciBvciB0aGUgdGVhIGlzIGluIGRiLCByZXR1cm4gYSBtZXNzYWdlICAgICAgICAgXHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIGlmKGVycikgcmV0dXJuIHJlcy5qc29uKGBTb21ldGhpbmcgd2VudCB3cm9uZywgcGxlYXNlIHRyeSBhZ2Fpbi4gJHtlcnJ9YCk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuanNvbih7bWVzc2FnZTpcImFydGljbGUgYWxyZWFkeSBleGlzdHNcIn0pO1xyXG4gICAgICAgIH1cclxuICAgIH0pICAgIFxyXG59O1xyXG5cclxuXHJcblxyXG4vL0dFVCAnLy86bmFtZSdcclxuY29uc3QgZ2V0T25lQXJ0aWNsZSA9IChyZXEsIHJlcykgPT4ge1xyXG4gICAgbGV0IHRpdGxlID0gcmVxLnBhcmFtcy50aXRsZTsgLy9nZXQgdGhlIHRlYSBuYW1lXHJcblxyXG4gICAgLy9maW5kIHRoZSBzcGVjaWZpYyB0ZWEgd2l0aCB0aGF0IG5hbWVcclxuICAgIGFydGljbGVzLmZpbmRPbmUoe3RpdGxlOnRpdGxlfSwgKGVyciwgZGF0YSkgPT4ge1xyXG4gICAgaWYoZXJyIHx8ICFkYXRhKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKHttZXNzYWdlOiBcImFydGljbGUgZG9lc24ndCBleGlzdC5cIn0pO1xyXG4gICAgfVxyXG4gICAgZWxzZSByZXR1cm4gcmVzLmpzb24oZGF0YSk7IC8vcmV0dXJuIHRoZSB0ZWEgb2JqZWN0IGlmIGZvdW5kXHJcbiAgICB9KTtcclxufTtcclxuXHJcbi8vREVMRVRFIDEgYXJ0aWNsZVxyXG5jb25zdCBkZWxldGVPbmVBcnRpY2xlID0gKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBsZXQgdGl0bGUgPSByZXEucGFyYW1zLnRpdGxlOyAvLyBnZXQgdGhlIG5hbWUgb2YgYXJ0aWNsZSB0byBkZWxldGVcclxuXHJcbiAgICBhcnRpY2xlcy5kZWxldGVPbmUoe3RpdGxlOnRpdGxlfSwgKGVyciwgZGF0YSkgPT4ge1xyXG4gICAgLy9pZiB0aGVyZSdzIG5vdGhpbmcgdG8gZGVsZXRlIHJldHVybiBhIG1lc3NhZ2VcclxuICAgIGlmKCBkYXRhLmRlbGV0ZWRDb3VudCA9PSAwKSByZXR1cm4gcmVzLmpzb24oe21lc3NhZ2U6IFwiYXJ0aWNsZSBkb2Vzbid0IGV4aXN0LlwifSk7XHJcbiAgICAvL2Vsc2UgaWYgdGhlcmUncyBhbiBlcnJvciwgcmV0dXJuIHRoZSBlcnIgbWVzc2FnZVxyXG4gICAgZWxzZSBpZiAoZXJyKSByZXR1cm4gcmVzLmpzb24oYFNvbWV0aGluZyB3ZW50IHdyb25nLCBwbGVhc2UgdHJ5IGFnYWluLiAke2Vycn1gKTtcclxuICAgIC8vZWxzZSwgcmV0dXJuIHRoZSBzdWNjZXNzIG1lc3NhZ2VcclxuICAgIGVsc2UgcmV0dXJuIHJlcy5qc29uKHttZXNzYWdlOiBcImFydGljbGUgZGVsZXRlZC5cIn0pO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG4vL1BPU1QgMSBhcnRpY2xlIGNvbW1lbnRcclxuY29uc3QgbmV3Q29tbWVudCA9IChyZXEsIHJlcykgPT4ge1xyXG4gICAgbGV0IHRpdGxlID0gcmVxLnBhcmFtcy50aXRsZTsgLy9nZXQgdGhlIHRlYSB0byBhZGQgdGhlIGNvbW1lbnQgaW5cclxuICAgIGxldCBuZXdDb21tZW50ID0gcmVxLmJvZHkuY29tbWVudHM7IC8vZ2V0IHRoZSBjb21tZW50XHJcbiAgICAvL2NyZWF0ZSBhIGNvbW1lbnQgb2JqZWN0IHRvIHB1c2hcclxuICAgIGNvbnN0IGNvbW1lbnRzID0ge1xyXG4gICAgICAgIHRleHQ6IG5ld0NvbW1lbnQsXHJcbiAgICAgICAgZGF0ZTogbmV3IERhdGUoKVxyXG4gICAgfVxyXG4gICAgLy9maW5kIHRoZSBhcnRpY2xlIG9iamVjdFxyXG4gICAgYXJ0aWNsZXMuZmluZE9uZSh7dGl0bGU6dGl0bGV9LCAoZXJyLCBkYXRhKSA9PiB7XHJcbiAgICAgICAgaWYoZXJyIHx8ICFkYXRhIHx8ICFuZXdDb21tZW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuanNvbih7bWVzc2FnZTogXCJhcnRpY2xlIGRvZXNuJ3QgZXhpc3QuXCJ9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vYWRkIGNvbW1lbnQgdG8gY29tbWVudHMgYXJyYXkgb2YgdGhlICBvYmplY3RcclxuICAgICAgICAgICAgZGF0YS5jb21tZW50cy5wdXNoKGNvbW1lbnRzKTtcclxuICAgICAgICAgICAgLy9zYXZlIGNoYW5nZXMgdG8gZGJcclxuICAgICAgICAgICAgZGF0YS5zYXZlKGVyciA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyKSB7IFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKHttZXNzYWdlOiBcIkNvbW1lbnQgZmFpbGVkIHRvIGFkZC5cIiwgZXJyb3I6ZXJyfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oZGF0YSk7XHJcbiAgICAgICAgICAgIH0pICBcclxuICAgICAgICB9IFxyXG4gICAgfSlcclxuICB9O1xyXG4gIFxyXG4vL1BPU1QgMSBhcnRpY2xlIGNvbW1lbnRcclxuY29uc3QgbGlrZXM9IChyZXEsIHJlcykgPT4ge1xyXG4gICAgbGV0IHRpdGxlID0gcmVxLnBhcmFtcy50aXRsZTsgLy9nZXQgdGhlIHRlYSB0byBhZGQgdGhlIGNvbW1lbnQgaW5cclxuICAgIGxldCBuZXdMaWtlcyA9IHJlcS5ib2R5Lmxpa2VzOyAvL2dldCB0aGUgY29tbWVudFxyXG4gICAgLy9jcmVhdGUgYSBjb21tZW50IG9iamVjdCB0byBwdXNoXHJcbiAgICBjb25zdCBsaWtlID0ge1xyXG4gICAgICAgIHRleHQ6IG5ld0xpa2VzLFxyXG4gICAgICAgIGRhdGU6IG5ldyBEYXRlKClcclxuICAgIH1cclxuICAgIC8vZmluZCB0aGUgYXJ0aWNsZSBvYmplY3RcclxuICAgIGFydGljbGVzLmZpbmRPbmUoe3RpdGxlOnRpdGxlfSwgKGVyciwgZGF0YSkgPT4ge1xyXG4gICAgICAgIGlmKGVyciB8fCAhZGF0YSB8fCAhbmV3Q29tbWVudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oe21lc3NhZ2U6IFwiYXJ0aWNsZSBkb2Vzbid0IGV4aXN0LlwifSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvL2FkZCBjb21tZW50IHRvIGNvbW1lbnRzIGFycmF5IG9mIHRoZSAgb2JqZWN0XHJcbiAgICAgICAgICAgIGRhdGEubGlrZXMucHVzaChsaWtlKTtcclxuICAgICAgICAgICAgLy9zYXZlIGNoYW5nZXMgdG8gZGJcclxuICAgICAgICAgICAgZGF0YS5zYXZlKGVyciA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyKSB7IFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKHttZXNzYWdlOiBcIkNvbW1lbnQgZmFpbGVkIHRvIGFkZC5cIiwgZXJyb3I6ZXJyfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oZGF0YSk7XHJcbiAgICAgICAgICAgIH0pICBcclxuICAgICAgICB9IFxyXG4gICAgfSlcclxuICB9O1xyXG4gIFxyXG5cclxuICBcclxuICBjb25zdCBuZXdVcGRhdGVzPShyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc29sZS5sb2cocmVxLnBhcmFtcy5faWQpO1xyXG4gICAgICAgYXJ0aWNsZXMuZmluZEJ5SWRBbmRVcGRhdGUoe19pZDpyZXEucGFyYW1zLl9pZH0se1xyXG4gICAgICAgJHNldDoge1xyXG4gICAgICAgIGltZzpyZXEuYm9keS5pbWcsXHJcbiAgICAgICAgdGl0bGU6cmVxLmJvZHkudGl0bGUsXHJcbiAgICAgICAgYXV0aG9yOnJlcS5ib2R5LmF1dGhvcixcclxuICAgICAgICBhcnRpY2xlQm9keTpyZXEuYm9keS5hcnRpY2xlQm9keSxcclxuICAgICAgIH1cclxuICAgIH0pLnRoZW4gKHJlc3VsdD0+e1xyXG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHt1cGRhdGVkX2FydGljbGVzOnJlc3VsdH0pXHJcbiAgICBcclxuICAgIH0pLmNhdGNoKGVycj0+e1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7ZXJyb3I6ZXJyfSlcclxuICAgIH0pXHJcbiAgICB9O1xyXG4vL2V4cG9ydCBjb250cm9sbGVyIGZ1bmN0aW9uc1xyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuICAgIGdldEFsbEFydGljbGVzLCBcclxuICAgIG5ld0FydGljbGVzLFxyXG4gICAgZ2V0T25lQXJ0aWNsZSxcclxuICAgZGVsZXRlT25lQXJ0aWNsZSxcclxuICAgIG5ld0NvbW1lbnQsXHJcbiAgICBsaWtlcyxcclxuICAgIG5ld1VwZGF0ZXMsXHJcbiAgICBcclxuICAgIFxyXG59O1xyXG4gICAgXHJcblxyXG4iXX0=